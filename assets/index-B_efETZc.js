var xi=Object.defineProperty;var Ii=(t,e,i)=>e in t?xi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var gt=(t,e,i)=>Ii(t,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var Ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ci(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qt="Expected a function",yt=NaN,Ei="[object Symbol]",Si=/^\s+|\s+$/g,ki=/^[-+]0x[0-9a-f]+$/i,Oi=/^0b[01]+$/i,Li=/^0o[0-7]+$/i,Ai=parseInt,Ti=typeof Ze=="object"&&Ze&&Ze.Object===Object&&Ze,Ri=typeof self=="object"&&self&&self.Object===Object&&self,Xi=Ti||Ri||Function("return this")(),Yi=Object.prototype,Pi=Yi.toString,Hi=Math.max,Mi=Math.min,et=function(){return Xi.Date.now()};function Di(t,e,i){var o,n,s,r,a,l,c=0,h=!1,p=!1,f=!0;if(typeof t!="function")throw new TypeError(Qt);e=bt(e)||0,Ne(i)&&(h=!!i.leading,p="maxWait"in i,s=p?Hi(bt(i.maxWait)||0,e):s,f="trailing"in i?!!i.trailing:f);function u(y){var E=o,k=n;return o=n=void 0,c=y,r=t.apply(k,E),r}function x(y){return c=y,a=setTimeout(m,e),h?u(y):r}function g(y){var E=y-l,k=y-c,S=e-E;return p?Mi(S,s-k):S}function v(y){var E=y-l,k=y-c;return l===void 0||E>=e||E<0||p&&k>=s}function m(){var y=et();if(v(y))return b(y);a=setTimeout(m,g(y))}function b(y){return a=void 0,f&&o?u(y):(o=n=void 0,r)}function I(){a!==void 0&&clearTimeout(a),c=0,o=l=n=a=void 0}function w(){return a===void 0?r:b(et())}function C(){var y=et(),E=v(y);if(o=arguments,n=this,l=y,E){if(a===void 0)return x(l);if(p)return a=setTimeout(m,e),u(l)}return a===void 0&&(a=setTimeout(m,e)),r}return C.cancel=I,C.flush=w,C}function Bi(t,e,i){var o=!0,n=!0;if(typeof t!="function")throw new TypeError(Qt);return Ne(i)&&(o="leading"in i?!!i.leading:o,n="trailing"in i?!!i.trailing:n),Di(t,e,{leading:o,maxWait:e,trailing:n})}function Ne(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Zi(t){return!!t&&typeof t=="object"}function Vi(t){return typeof t=="symbol"||Zi(t)&&Pi.call(t)==Ei}function bt(t){if(typeof t=="number")return t;if(Vi(t))return yt;if(Ne(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ne(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Si,"");var i=Oi.test(t);return i||Li.test(t)?Ai(t.slice(2),i?2:8):ki.test(t)?yt:+t}var Fi=Bi;const wt=Ci(Fi),M={SPIN_X:"spin-x",SPIN_Y:"spin-y",SPIN_XY:"spin-xy",SPIN_YX:"spin-yx"},Wi=[!1,0,null,void 0,"false","0","null","undefined"],P={X:"x-axis",Y:"y-axis"},Ni=[37,39],ji=[38,40],xt=10,_i=150,It=800,$i=150,zi=200,Ct=50,Gi=50,Ui=5,Et=5,Ki="https://scaleflex.cloudimg.io/v7/filerobot/js-cloudimage-360-view/360_view.svg",d={folder:"/",apiVersion:"v7",filenameX:"image-{index}.jpg",filenameY:null,imageListX:null,imageListY:null,indexZeroBase:0,amountX:0,amountY:0,speed:80,dragSpeed:150,draggable:!0,swipeable:!0,keys:!1,keysReverse:!1,autoplay:!1,autoplayBehavior:M.SPIN_X,playOnce:!1,autoplayReverse:!1,pointerZoom:0,fullscreen:!1,magnifier:null,bottomCircle:!0,bottomCircleOffset:5,ciToken:null,ciFilters:null,ciTransformation:null,lazyload:!0,dragReverse:!1,stopAtEdges:!1,imageInfo:!1,initialIconShown:!0,hotspots:null,hide360Logo:!1,logoSrc:Ki,inertia:!1,pinchZoom:!0,hints:!0,theme:null,hotspotTimelineOnClick:!0,aspectRatio:null,onReady:null,onLoad:null,onSpin:null,onAutoplayStart:null,onAutoplayStop:null,onFullscreenOpen:null,onFullscreenClose:null,onZoomIn:null,onZoomOut:null,onDragStart:null,onDragEnd:null},qi=t=>({folder:L(t,"folder",d.folder),apiVersion:L(t,"api-version",d.apiVersion),filenameX:L(t,"filename")||L(t,"filename-x")||d.filenameX,filenameY:L(t,"filename-y",d.filenameY),imageListX:L(t,"image-list-x",d.imageListX),imageListY:L(t,"image-list-y",d.imageListY),indexZeroBase:parseInt(L(t,"index-zero-base",d.indexZeroBase),10),amountX:parseInt(L(t,"amount-x",d.amountX),10),amountY:parseInt(L(t,"amount-y",d.amountY),10),speed:parseInt(L(t,"speed",d.speed),10),dragSpeed:parseInt(L(t,"drag-speed",d.dragSpeed),10),draggable:Y(t,"draggable",d.draggable),swipeable:Y(t,"swipeable",d.swipeable),keys:Y(t,"keys",d.keys),keysReverse:Y(t,"keys-reverse",d.keysReverse),autoplay:Y(t,"autoplay",d.autoplay),autoplayBehavior:L(t,"autoplay-behavior",d.autoplayBehavior),playOnce:Y(t,"play-once",d.playOnce),autoplayReverse:Y(t,"autoplay-reverse",d.autoplayReverse),pointerZoom:parseFloat(L(t,"pointer-zoom",d.pointerZoom)),fullscreen:Y(t,"fullscreen")||Y(t,"full-screen",d.fullscreen),magnifier:parseFloat(L(t,"magnifier",d.magnifier)),bottomCircleOffset:parseInt(L(t,"bottom-circle-offset",d.bottomCircleOffset),10),ciToken:L(t,"responsive",d.ciToken),ciFilters:L(t,"filters",d.ciFilters),ciTransformation:L(t,"transformation",d.ciTransformation),lazyload:Y(t,"lazyload",d.lazyload),dragReverse:Y(t,"drag-reverse",d.dragReverse),stopAtEdges:Y(t,"stop-at-edges",d.stopAtEdges),imageInfo:Y(t,"info",d.imageInfo),initialIconShown:!Ve(t,"initial-icon"),bottomCircle:!Ve(t,"bottom-circle"),hide360Logo:Y(t,"hide-360-logo",d.hide360Logo),logoSrc:L(t,"logo-src",d.logoSrc),inertia:Y(t,"inertia",d.inertia),pinchZoom:Y(t,"pinch-zoom",d.pinchZoom),hints:!Ve(t,"hints"),theme:L(t,"theme",d.theme),hotspotTimelineOnClick:!Ve(t,"hotspot-timeline-on-click"),aspectRatio:L(t,"aspect-ratio",d.aspectRatio)}),Ji=t=>{const e=[];t.amountX!==void 0&&t.amountX<0&&e.push("amountX should be a positive number"),t.amountY!==void 0&&t.amountY<0&&e.push("amountY should be a positive number"),t.speed!==void 0&&t.speed<=0&&e.push("speed should be a positive number"),t.dragSpeed!==void 0&&t.dragSpeed<=0&&e.push("dragSpeed should be a positive number"),t.pointerZoom!==void 0&&t.pointerZoom!==0&&(t.pointerZoom<1||t.pointerZoom>5)&&e.push("pointerZoom should be between 1 and 5 (or 0 to disable)"),t.magnifier!==void 0&&t.magnifier!==null&&t.magnifier!==0&&(t.magnifier<1||t.magnifier>5)&&e.push("magnifier should be between 1 and 5 (or 0/null to disable)"),!t.folder&&!t.imageListX&&!t.imageListY&&e.push("Either folder or imageListX/imageListY is required"),t.folder&&!t.amountX&&!t.imageListX&&e.push("amountX is required when using folder (unless imageListX is provided)");const i=["spin-x","spin-y","spin-xy","spin-yx"];return t.autoplayBehavior&&!i.includes(t.autoplayBehavior)&&e.push(`autoplayBehavior should be one of: ${i.join(", ")}`),e.forEach(o=>{console.warn(`CloudImage 360: ${o}`)}),e.length===0},Qi=t=>(Ji(t),{folder:t.folder||d.folder,apiVersion:t.apiVersion||d.apiVersion,filenameX:t.filenameX||t.filename||d.filenameX,filenameY:t.filenameY||d.filenameY,imageListX:t.imageListX||d.imageListX,imageListY:t.imageListY||d.imageListY,indexZeroBase:parseInt(t.indexZeroBase??d.indexZeroBase,10),amountX:parseInt(t.amountX??d.amountX,10),amountY:parseInt(t.amountY??d.amountY,10),speed:parseInt(t.speed??d.speed,10),draggable:t.draggable??d.draggable,swipeable:t.swipeable??d.swipeable,dragSpeed:parseInt(t.dragSpeed??d.dragSpeed,10),keys:t.keys??d.keys,keysReverse:t.keysReverse??d.keysReverse,autoplay:t.autoplay??d.autoplay,autoplayBehavior:t.autoplayBehavior||d.autoplayBehavior,playOnce:t.playOnce??d.playOnce,autoplayReverse:t.autoplayReverse??d.autoplayReverse,pointerZoom:parseFloat(t.pointerZoom??d.pointerZoom),fullscreen:t.fullscreen??d.fullscreen,magnifier:parseFloat(t.magnifier??d.magnifier),bottomCircleOffset:parseInt(t.bottomCircleOffset??d.bottomCircleOffset,10),ciToken:t.ciToken||d.ciToken,ciFilters:t.ciFilters||d.ciFilters,ciTransformation:t.ciTransformation||d.ciTransformation,lazyload:t.lazyload??d.lazyload,dragReverse:t.dragReverse??d.dragReverse,stopAtEdges:t.stopAtEdges??d.stopAtEdges,imageInfo:t.imageInfo??d.imageInfo,initialIconShown:t.initialIconShown??d.initialIconShown,bottomCircle:t.bottomCircle??d.bottomCircle,hotspots:t.hotspots??d.hotspots,hide360Logo:t.hide360Logo??d.hide360Logo,logoSrc:t.logoSrc||d.logoSrc,inertia:t.inertia??d.inertia,pinchZoom:t.pinchZoom??d.pinchZoom,hints:t.hints??d.hints,theme:t.theme||d.theme,hotspotTimelineOnClick:t.hotspotTimelineOnClick??d.hotspotTimelineOnClick,aspectRatio:t.aspectRatio||d.aspectRatio,onReady:t.onReady??d.onReady,onLoad:t.onLoad??d.onLoad,onSpin:t.onSpin??d.onSpin,onAutoplayStart:t.onAutoplayStart??d.onAutoplayStart,onAutoplayStop:t.onAutoplayStop??d.onAutoplayStop,onFullscreenOpen:t.onFullscreenOpen??d.onFullscreenOpen,onFullscreenClose:t.onFullscreenClose??d.onFullscreenClose,onZoomIn:t.onZoomIn??d.onZoomIn,onZoomOut:t.onZoomOut??d.onZoomOut,onDragStart:t.onDragStart??d.onDragStart,onDragEnd:t.onDragEnd??d.onDragEnd}),L=(t,e,i)=>t.getAttribute(e)||t.getAttribute(`data-${e}`)||i,Y=(t,e,i)=>{if(!(t.hasAttribute(e)||t.hasAttribute(`data-${e}`)))return i;const n=L(t,e,null);return n!=="false"&&n!=="0"},Ve=(t,e)=>L(t,e,null)==="false",eo=(t=1)=>{const e=Math.round(window.devicePixelRatio||1);return parseInt(t)*e},to=(t,e,i)=>new URL(t).origin.includes("cloudimg")?t:`https://${e}.cloudimg.io/${i}${t}`,io=({ciTransformation:t,responsiveWidth:e,ciFilters:i})=>{const o=`width=${e}`,n=t||o,s=i?`&f=${i}`:"";return`${n}${s}`},Le=(t,e)=>{const{folder:i,apiVersion:o,filename:n="",ciParams:s}=t,{ciToken:r,ciFilters:a,ciTransformation:l}=s||{},c=`${i}${n}`;if(!r)return c;const h=Wi.includes(o)?null:o,p=h?`${h}/`:"",f=eo(e),u=to(c,r,p),x=io({ciTransformation:l,responsiveWidth:f,ciFilters:a});return`${u}${x?"?":""}${x}`},oo=(t,e,i)=>{const[o,n]=t.split("?"),s=`${e}=${encodeURIComponent(i)}`;if(!n)return`${o}?${s}`;const r=new URLSearchParams(n);return r.set(e,i),`${o}?${r.toString()}`},no=(t,e)=>oo(t,"width",e),ei=(t,e=0)=>(t+="",t.length>=e?t:new Array(e-t.length+1).join("0")+t),so=(t,{amount:e=0,indexZeroBase:i=0}={})=>Array.from({length:e},(o,n)=>t.replace("{index}",ei(n+1,i))),ao=({imagesUrls:t,onFirstImageLoad:e,onImageLoad:i,onAllImagesLoad:o,onError:n,autoplayReverse:s})=>{let r=0,a=0;const l=t.length,c=[],h=[],p=(m,b,I=!1)=>{const w={message:`Failed to load image: ${m}`,url:m,index:b,isFirstImage:I};h.push(w),a++,n==null||n({error:w,errorCount:a,totalImages:l,errors:h})},f=()=>{r===l&&(o==null||o(c,{errorCount:a,errors:h}))},u=(m,b)=>{const I=new Image;I.crossOrigin="anonymous",I.src=m,I.onload=async()=>{try{const w=await createImageBitmap(I),C={src:m,bitmapImage:w,naturalWidth:I.naturalWidth,naturalHeight:I.naturalHeight};r++,c[b]=C,i==null||i(C,b),f()}catch{r++,p(m,b),f()}},I.onerror=()=>{r++,p(m,b),f()}},x=new Image,g=s?t.length-1:0,v=t[g];x.crossOrigin="anonymous",x.src=v,x.onload=async()=>{try{const m=await createImageBitmap(x),b={src:v,bitmapImage:m,naturalWidth:x.naturalWidth,naturalHeight:x.naturalHeight};c[g]=b,r++,e==null||e(b),i==null||i(b,g);for(let I=0;I<t.length;I++)I!==g&&u(t[I],I);f()}catch{r++,p(v,g,!0);for(let b=0;b<t.length;b++)b!==g&&u(t[b],b);f()}},x.onerror=()=>{r++,p(v,g,!0);for(let m=0;m<t.length;m++)m!==g&&u(t[m],m);f()}},St=({cdnPathX:t,cdnPathY:e,configX:i,configY:o,onFirstImageLoad:n,onImageLoad:s,onAllImagesLoad:r,onError:a})=>{let l={x:!1,y:!1},c=[],h=[],p={errorCount:0,errors:[]},f={errorCount:0,errors:[]};const u=t||i.imageList.length,x=e||o.imageList.length,g=()=>{if(l.x&&l.y){const m={errorCount:p.errorCount+f.errorCount,errors:[...p.errors,...f.errors]};r==null||r(c,h,m)}},v=({cdnPath:m,config:b,orientation:I,loadedImages:w,loadStats:C,onFirstImageLoad:y})=>{const E=I===P.X,k=b.imageList.length?b.imageList:so(m,b);ao({imagesUrls:k,onFirstImageLoad:y,onImageLoad:(S,O)=>{s==null||s(S,O,I),w[O]=S},onError:S=>{a==null||a({...S,orientation:I})},onAllImagesLoad:(S,O)=>{w.length=0,S.forEach((A,H)=>{A&&(w[H]=A)}),C.errorCount=O.errorCount,C.errors=O.errors.map(A=>({...A,orientation:I})),l[E?"x":"y"]=!0,g()},autoplayReverse:b.autoplayReverse})};u?v({cdnPath:t,config:i,orientation:P.X,loadedImages:c,loadStats:p,onFirstImageLoad:n}):l.x=!0,x?v({cdnPath:e,config:o,orientation:P.Y,loadedImages:h,loadStats:f,onFirstImageLoad:u?void 0:n}):l.y=!0,!u&&!x&&g()},ro=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1052 156" aria-hidden="true">
  <path fill="currentColor" d="M409.9,145.6c-42.7-1.7-85.5-4.4-128.1-8.4c-21.3-2-42.6-4.3-63.8-7.1c-21.2-2.8-42.4-5.9-63.4-9.7c-21.1-3.8-42-8.2-62.7-13.7c-10.3-2.8-20.6-5.8-30.7-9.4c-10.1-3.5-20.1-7.6-29.5-12.7c-4.7-2.6-9.3-5.4-13.5-8.8c-2.1-1.7-4-3.6-5.8-5.6c-1.8-2-3.3-4.3-4.3-6.8c-1.1-2.5-1.6-5.3-1.4-8c0.2-2.7,1.1-5.4,2.4-7.7c2.7-4.8,6.7-8.5,11-11.7c8.6-6.4,18.4-10.9,28.3-15c9.9-4,20.1-7.3,30.4-10.3c-10.2,3.1-20.4,6.5-30.3,10.5c-9.8,4.1-19.6,8.7-28.1,15.1c-4.2,3.2-8.2,6.9-10.7,11.6c-1.2,2.3-2.1,4.8-2.3,7.5c-0.1,2.6,0.4,5.2,1.4,7.6c2.1,4.8,5.9,8.7,10,12.1c4.1,3.3,8.7,6.1,13.4,8.6c9.4,5,19.4,8.9,29.4,12.4c10.1,3.5,20.4,6.4,30.7,9.1c20.7,5.3,41.6,9.5,62.7,13.2c21,3.6,42.2,6.6,63.4,9.2c21.2,2.6,42.5,4.8,63.7,6.6c42.6,3.7,85.2,6,127.9,7.4L409.9,145.6z"/>
  <path fill="currentColor" d="M977.1,11.6c13.8,4.1,27.4,8.8,40.4,15.2c6.4,3.2,12.7,6.9,18.3,11.5c2.7,2.4,5.3,5,7.3,8c2,3,3.3,6.6,3.3,10.3c0,3.7-1.4,7.2-3.3,10.3c-2,3.1-4.5,5.7-7.3,8.1c-2.7,2.4-5.7,4.4-8.8,6.3c-1.6,0.9-3.1,1.9-4.7,2.7l-2.4,1.3l-2.4,1.2C1004.5,93,990.8,97.8,977,102c-6.9,2.1-13.8,4-20.8,5.8c-7,1.8-14,3.5-21,5c-14.1,3.1-28.2,5.9-42.4,8.3c-28.4,4.9-57,8.8-85.6,12c-57.3,6.4-114.8,10.2-172.4,12.2c-57.6,2-115.2,2.3-172.9,0.8l0.1-4c57.5,1.8,115.1,1.9,172.6,0.2c57.5-1.7,115-5.2,172.3-11.2c28.6-3.1,57.2-6.7,85.6-11.5c14.2-2.4,28.3-5,42.4-8.1c7-1.5,14-3.1,21-4.9c7-1.7,13.9-3.6,20.8-5.7c13.8-4.1,27.4-8.8,40.3-15.2l2.4-1.2l2.4-1.3c1.6-0.8,3.1-1.8,4.7-2.7c3-1.9,6-3.9,8.7-6.2c2.7-2.3,5.2-4.9,7.2-7.9c1.9-3,3.2-6.4,3.3-10c0-3.6-1.2-7-3.1-10c-1.9-3-4.4-5.6-7.1-8c-5.5-4.7-11.7-8.3-18.1-11.6C1004.5,20.6,990.8,15.8,977.1,11.6z"/>
  <g transform="translate(415, 136)">
    <path fill="currentColor" d="M18.1,11.2c-1.8,0-2.8-1.2-2.8-3V8c0.8-0.4,1.7-0.6,2.8-0.6c1.5,0,2.5,0.6,2.5,1.7C20.6,10.2,19.8,11.2,18.1,11.2L18.1,11.2z M18.3,5.7c-1.1,0-2,0.3-2.8,0.7c0.3-1.6,1.5-2.6,3.7-2.6c1.1,0,2.3,0.3,3.1,0.5V2.6c-0.8-0.3-1.9-0.5-3.1-0.5c-4.2,0-6.2,2.1-6.2,5.8c0,3.2,1.8,4.9,5.1,4.9c3.3,0,5-1.7,5-3.6C23,7,21.3,5.7,18.3,5.7L18.3,5.7z"/>
    <path fill="currentColor" d="M39.3,1.8c0.9,0,1.6,0.7,1.6,1.5c0,0.8-0.7,1.6-1.6,1.6c-0.8,0-1.6-0.7-1.6-1.6C37.8,2.5,38.5,1.8,39.3,1.8L39.3,1.8z M39.3,6.3c1.7,0,3.1-1.3,3.1-3c0-1.6-1.4-3-3.1-3c-1.7,0-3.1,1.3-3.1,3C36.2,5,37.6,6.3,39.3,6.3L39.3,6.3z"/>
    <path fill="currentColor" d="M30.3,3.8c2.1,0,2.9,1.4,2.9,3.6c0,2.2-0.8,3.6-2.9,3.6c-2.1,0-2.9-1.5-2.9-3.6C27.4,5.3,28.1,3.8,30.3,3.8L30.3,3.8z M30.2,12.8c3.9,0,5.2-2.6,5.2-5.4c0-2.8-1.3-5.3-5.2-5.3c-3.9,0-5.3,2.6-5.3,5.4C25,10.3,26.3,12.8,30.2,12.8L30.2,12.8z"/>
    <path fill="currentColor" d="M10.9,9.7c0-1.1-0.8-2-2.5-2.5c1.3-0.5,1.9-1.3,1.9-2.3c0-1.7-1.7-2.8-4.6-2.8c-1.5,0-2.7,0.3-3.6,0.8v1.7c0.9-0.4,2.3-0.7,3.4-0.7C7,3.9,8,4.4,8,5.1c0,0.8-0.7,1.3-2.4,1.3H4.3v1.6h1.3c2,0,2.9,0.8,2.9,1.6c0,0.8-1,1.5-2.8,1.5c-1.5,0-2.8-0.3-3.7-0.6v1.7c0.9,0.3,2.1,0.6,3.8,0.6C9.2,12.8,10.9,11.4,10.9,9.7"/>
  </g>
</svg>
`,lo=t=>{const e=document.createElement("div");return e.innerHTML=ro,e.style.bottom=`${t}%`,e.className="cloudimage-360-view-360-circle",e},co=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
  <!-- Circular arrows -->
  <path d="M 75 50 A 25 25 0 1 1 50 25" stroke="currentColor" stroke-width="3"/>
  <path d="M 25 50 A 25 25 0 1 1 50 75" stroke="currentColor" stroke-width="3"/>
  <!-- Arrow heads -->
  <path d="M 50 25 L 56 31 M 50 25 L 56 19" stroke="currentColor" stroke-width="3"/>
  <path d="M 50 75 L 44 69 M 50 75 L 44 81" stroke="currentColor" stroke-width="3"/>
  <!-- 360 text -->
  <text x="50" y="54" text-anchor="middle" font-size="16" font-weight="600" fill="currentColor" stroke="none" font-family="system-ui, -apple-system, sans-serif">360Â°</text>
</svg>
`,ho=t=>{const e=document.createElement("div");return e.className="cloudimage-initial-icon",e.setAttribute("aria-label","360 degree view - drag to rotate"),t?(e.style.backgroundImage=`url('${t}')`,e.style.backgroundPosition="50% 50%",e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat"):e.innerHTML=co,e},uo=(t,e)=>{const{width:i,height:o}=e,n=document.createElement("canvas");return n.width=i,n.height=o,n.style.width="100%",n.style.height="auto",t.appendChild(n),n},po=()=>{const t=document.createElement("button");return t.className="cloudimage-360-button cloudimage-360-close-icon",t.setAttribute("aria-label","Close fullscreen"),t.setAttribute("type","button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>',t},fo=()=>{const t=document.createElement("button");return t.className="cloudimage-360-button cloudimage-360-fullscreen-button",t.setAttribute("aria-label","View fullscreen"),t.setAttribute("type","button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/></svg>',t},kt=t=>{const e=document.createElement("div");return e.className="cloudimage-360-icons-container",t.appendChild(e),e},mo=t=>{const e=document.createElement("div");return e.className="cloudimage-360-inner-box",e.setAttribute("role","img"),e.setAttribute("aria-label","360 degree product view. Use mouse drag or arrow keys to rotate."),t.appendChild(e),e},vo=()=>{const t=document.createElement("button");return t.className="cloudimage-360-button cloudimage-360-magnifier-button",t.setAttribute("aria-label","Magnify image"),t.setAttribute("type","button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/><path d="M11 8v6"/><path d="M8 11h6"/></svg>',t},go=t=>{const e=document.createElement("div");e.className="cloudimage-initial-icon";const i=document.createElement("span");return i.className="percentage",i.innerText="0%",e.appendChild(i),t.appendChild(e),e},yo=t=>{const e=document.createElement("div");e.className="cloudimage-360-fullscreen-modal";const i=t.cloneNode();return i.style.width="100%",i.style.maxWidth="100%",i.style.height="100vh",i.style.maxHeight="100%",e.appendChild(i),window.document.body.appendChild(e),i},it=(t,e)=>{const i=t.querySelector(e);i&&i.parentNode.removeChild(i)},bo=()=>{const t=document.createElement("div");return t.className="cloudimage-loading-spinner",t},wo=()=>{const t=document.createElement("div");return t.className="cloudimage-360-transition-overlay",t},xo=t=>{const e=document.createElement("div");return e.className="cloudimage-360-hotspot-container",t.appendChild(e),e},Io=t=>{const e=document.createElement("div");return e.className="cloudimage-360-sr-only",e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),t.appendChild(e),e},Co=(t,e)=>{t&&(t.textContent="",setTimeout(()=>{t.textContent=e},50))},ti={drag:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2"/><path d="M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2"/><path d="M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8"/><path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/></svg>',swipe:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m18 16 4-4-4-4"/><path d="m6 8-4 4 4 4"/><path d="M8 12h8"/></svg>',click:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m9 9 5 12 1.8-5.2L21 14Z"/><path d="M7.2 2.2 8 5.1"/><path d="m5.1 8-2.9-.8"/><path d="M14 4.1 12 6"/><path d="m6 12-1.9 2"/></svg>',pinch:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 6l4 4"/><path d="M18 6l-4 4"/><path d="M6 18l4-4"/><path d="M18 18l-4-4"/><circle cx="12" cy="12" r="2"/></svg>',keys:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m9 10 3 3 3-3"/></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/></svg>'},Eo={drag:"Drag to rotate",swipe:"Swipe to rotate",click:"Click to zoom",pinch:"Pinch to zoom",keys:"Use arrow keys",fullscreen:"Click for fullscreen"},So=t=>{const e=document.createElement("div");return e.className="cloudimage-360-hint-item",e.innerHTML=`
    ${ti[t]}
    <span>${Eo[t]}</span>
  `,e},Ot=(t,e=[])=>{if(!e||e.length===0)return null;const i=document.createElement("div");i.className="cloudimage-360-hints-overlay",i.setAttribute("role","tooltip"),i.setAttribute("aria-label","Interaction hints");const o=document.createElement("div");return o.className="cloudimage-360-hints-container",e.forEach(n=>{ti[n]&&o.appendChild(So(n))}),i.appendChild(o),t.appendChild(i),i},Lt=(t,e)=>e?["swipe"]:["drag","click"],At=t=>{t&&t.classList.add("visible")},ko=t=>{t&&(t.classList.remove("visible"),t.classList.add("hiding"),setTimeout(()=>{t.classList.remove("hiding")},300))},Oo=t=>{if(!t||typeof t!="object")return null;const e=Object.keys(t).map(o=>parseInt(o,10)).filter(o=>!isNaN(o)).sort((o,n)=>o-n);if(e.length===0)return null;const i=Math.floor(e.length/2);return e[i]},Lo=t=>{const e=[];return!t||!Array.isArray(t)||t.forEach((i,o)=>{const n=Oo(i.positions);n!==null&&e.push({id:i.id||`hotspot-${o}`,frame:n,label:i.label||null})}),e},Ao=400,To=(t,e,i,o)=>{const n=document.createElement("button");n.className="cloudimage-360-hotspot-timeline-dot",n.setAttribute("type","button"),n.setAttribute("aria-label",o||`Go to hotspot at frame ${e+1}`),n.setAttribute("data-frame",e.toString()),n.setAttribute("data-hotspot-id",t);const s=i>1?e/(i-1)*100:0;if(n.style.left=`${s}%`,o){const r=document.createElement("span");r.className="cloudimage-360-hotspot-timeline-tooltip",r.textContent=o,n.appendChild(r);let a=null;n.addEventListener("mouseenter",()=>{a=setTimeout(()=>{r.classList.add("visible")},Ao)}),n.addEventListener("mouseleave",()=>{a&&(clearTimeout(a),a=null),r.classList.remove("visible")}),n.addEventListener("click",()=>{a&&(clearTimeout(a),a=null),r.classList.remove("visible")})}return n},Ro=(t,e,i)=>{const o=Lo(i);if(o.length===0)return null;const n=document.createElement("div");n.className="cloudimage-360-hotspot-timeline",n.setAttribute("role","navigation"),n.setAttribute("aria-label","Hotspot timeline navigation");const s=document.createElement("div");s.className="cloudimage-360-hotspot-timeline-track";const r=document.createElement("div");return r.className="cloudimage-360-hotspot-timeline-indicator",o.forEach(({id:a,frame:l,label:c})=>{const h=To(a,l,e,c);s.appendChild(h)}),s.appendChild(r),n.appendChild(s),t.appendChild(n),{element:n,indicator:r,hotspotFrames:o}},Xo=(t,e,i)=>{if(!t)return;const o=i>1?e/(i-1)*100:0;t.style.left=`${o}%`},Yo=t=>{t&&t.classList.add("visible")},Po=t=>{t&&t.classList.remove("visible")},ot=(t,e=[])=>{if(!t)return e;try{return JSON.parse(t)}catch(i){return console.warn("CloudImage 360: Failed to parse JSON:",i.message),e}},Ho=(t,e)=>{const[i,o]=t.split("?");if(!o)return t;const n=new RegExp(`^${e}=|&${e}=`),s=o.split("&").filter(r=>!n.test(r)).join("&");return s?`${i}?${s}`:i},Mo=t=>{const e=Ho(t,"width"),i=e.includes("?")?"&":"?";return`${e}${i}width=${150*devicePixelRatio}`},Do=t=>{const e={root:null,rootMargin:"0px",threshold:.1},i=n=>{const s=n.getAttribute("data-src");s&&(n.src=s)};new IntersectionObserver((n,s)=>{n.forEach(r=>{r.isIntersecting&&(i(r.target),s.unobserve(r.target))})},e).observe(t)},Bo=(t,e)=>{const i=ei(1,e);return t.replace("{index}",i)},Zo=(t,e)=>{const[i]=t,o=/(https?):\/\//i.test(i);return Le({...e,folder:o?"":e.folder,filename:i})},Vo=(t,e)=>{const{imageList:i,indexZeroBase:o}=e;if(i.length){const n=ot(i,null);if(n)return Zo(n,e)}return Bo(t,o)},Tt=(t,e,i)=>{const o=new Image;return o.setAttribute(e?"data-src":"src",t),o.className=i,o.style.cssText=`
    position: ${e?"absolute":"static"};
    width: 100%;
    inset: 0;
    height: 100%;
    object-fit: contain;
    object-position: center;
    filter: blur(10px);
  `,o},Rt=(t,e,i)=>{const{innerBox:o,imageList:n,lazyload:s}=e||{},[r]=n,a=r||Vo(t,e),l=Mo(a),c=Tt(l,s,"cloudimage-lazy"),h=Tt(l,!1,"cloudimage-360-placeholder"),p=f=>{it(o,".cloudimage-lazy"),i&&i({event:f,width:c.width,height:c.height,naturalWidth:c.naturalWidth,naturalHeight:c.naturalHeight,src:l})};c.onload=p,o.appendChild(c),o.appendChild(h),Do(c)},Fo=(t,e,i)=>{const o=new Image;o.src=t,o.onload=n=>{e&&e({event:n,width:o.width,height:o.height,naturalWidth:o.naturalWidth,naturalHeight:o.naturalHeight,src:t})},o.onerror=n=>{const s=new Error(`Failed to load image: ${t}`);s.url=t,s.event=n,i?i(s):console.error(s.message)}},Wo=(t,e)=>{const i=e.getBoundingClientRect(),o=t.touches?t.touches[0].clientX:t.clientX,n=t.touches?t.touches[0].clientY:t.clientY;return{x:o-i.left,y:n-i.top}},tt=(t,e,i)=>{const{container:o,w:n,h:s,zoom:r,bw:a,offsetX:l,offsetY:c}=e,h=Wo(t,o);let p=h.x,f=h.y;p=Math.max(n/r,Math.min(p,o.offsetWidth-n/r)),f=Math.max(s/r,Math.min(f,o.offsetHeight-s/r)),i.style.left=`${p-n}px`,i.style.top=`${f-s}px`;const u=(p-l)*r-n+a,x=(f-c)*r-s+a;i.style.backgroundPosition=`-${u}px -${x}px`},No=(t,e,i,o,n,s)=>{const{x:r=0,y:a=0}=i||{},l=(e.offsetWidth-r*2)*s,c=(e.offsetHeight-a*2)*s;if(!n)return;n.setAttribute("class","cloudimage-360-img-magnifier-glass"),e.prepend(n),n.style.backgroundImage=`url('${o.src}')`,n.style.backgroundSize=`${l}px ${c}px`;const h=3,p=n.offsetWidth/2,f=n.offsetHeight/2,u={container:e,w:p,h:f,zoom:s,bw:h,offsetX:r,offsetY:a};tt(t,u,n);const x=v=>{tt(v,u,n)},g=v=>{v.preventDefault(),tt(v,u,n)};n.addEventListener("mousemove",x),e.addEventListener("mousemove",x),e.addEventListener("touchmove",g)},jo=(t,e,i)=>{const{clientX:o,clientY:n}=t,s=e.getBoundingClientRect(),r=e.width/(s.width*i),a=e.height/(s.height*i),l=(o-s.left)*r,c=(n-s.top)*a;return{offsetX:l,offsetY:c}},Xt=(t,{bottom:e,top:i})=>{t?e():i()},Yt=(t,{left:e,right:i})=>{t?e():i()},_o=({autoplayBehavior:t,spinY:e,reversed:i,loopTriggers:o})=>{switch(t){case M.SPIN_XY:case M.SPIN_YX:e?Xt(i,o):Yt(i,o);break;case M.SPIN_Y:Xt(i,o);break;case M.SPIN_X:default:Yt(i,o)}},$o=({autoplayBehavior:t,activeImageX:e,activeImageY:i,amountX:o,amountY:n,autoplayReverse:s})=>{const r=(a,l)=>{const c=l-1;return s?a===0:a===c};switch(t){case M.SPIN_XY:case M.SPIN_Y:return r(i,n);case M.SPIN_X:case M.SPIN_YX:default:return r(e,o)}},zo=({autoplayBehavior:t,activeImageX:e,activeImageY:i,amountX:o,amountY:n,autoplayReverse:s,spinDirection:r})=>{const a=e===(s?0:o-1),l=i===(s?0:n-1);return t===M.SPIN_XY||t===M.SPIN_YX?r==="x"&&a||r==="y"&&l:!1},Go=(t,e,i)=>{if(!i)return"x";if(!e)return"y";switch(t){case M.SPIN_XY:return"x";case M.SPIN_YX:return"y";case M.SPIN_Y:return"y";case M.SPIN_X:default:return"x"}},Uo=t=>t==="x"?"y":"x",Pt=(t,e)=>{const i=[...Ni];return e?[...i,...ji].includes(t):i.includes(t)},Ht=({deltaX:t,deltaY:e,reversed:i,allowSpinX:o,allowSpinY:n,threshold:s=0})=>{const r=o&&!n||n&&!o?0:s,a=Math.abs(t),l=Math.abs(e);return o&&a-r>l?i?t>0?"left":"right":t>0?"right":"left":n&&l-r>a?i?e>0?"up":"down":e>0?"down":"up":null},Ko=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,qo=(t,e=150)=>{let i;return function(...o){clearTimeout(i),i=setTimeout(()=>{t.apply(this,o)},e)}},ii="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHY9KHQsYSxlKT0+e2NvbnN0IHM9dC9lLG49YS9lO3JldHVybnt6b29tZWRXaWR0aDpzLHpvb21lZEhlaWdodDpufX0sej0oe3BvaW50ZXJYOnQscG9pbnRlclk6YSxpbWFnZURhdGE6ZSx6b29tZWRXaWR0aDpzLHpvb21lZEhlaWdodDpuLGRyYXdXaWR0aDppLGRyYXdIZWlnaHQ6Y30pPT57Y29uc3R7bmF0dXJhbFdpZHRoOmcsbmF0dXJhbEhlaWdodDp1fT1lO2xldCBmPXQvaSpnLXMvMixtPWEvYyp1LW4vMjtjb25zdCB4PU1hdGgubWF4KDAsZy1zKSxPPU1hdGgubWF4KDAsdS1uKTtyZXR1cm4gZj1NYXRoLm1heCgwLE1hdGgubWluKGYseCkpLG09TWF0aC5tYXgoMCxNYXRoLm1pbihtLE8pKSx7em9vbU9mZnNldFg6Zix6b29tT2Zmc2V0WTptfX07bGV0IG8saCxyLGQsbCx3O3NlbGYub25tZXNzYWdlPWFzeW5jIHQ9Pntjb25zdHthY3Rpb246YSxvZmZzY3JlZW46ZSxkZXZpY2VQaXhlbFJhdGlvOnMsaW1hZ2VEYXRhOm4sem9vbVNjYWxlOmkscG9pbnRlclg6Yyxwb2ludGVyWTpnLGltYWdlQXNwZWN0UmF0aW86dSxjb250YWluZXJXaWR0aDpmLGNvbnRhaW5lckhlaWdodDptfT10LmRhdGE7c3dpdGNoKGEpe2Nhc2UiaW5pdENhbnZhcyI6QyhlLHMpO2JyZWFrO2Nhc2UiYWRhcHRDYW52YXNTaXplIjpwKHUsZixtKTticmVhaztjYXNlImRyYXdJbWFnZU9uQ2FudmFzIjpJKG4saSxjLGcpO2JyZWFrfX07Y29uc3QgQz0odCxhKT0+e289dCxoPW8uZ2V0Q29udGV4dCgiMmQiKSxyPWF9LHA9KHQsYSxlKT0+e2NvbnN0IHM9YS9lO3c9dD5zLG8ud2lkdGg9YSpyLG8uaGVpZ2h0PWUqcixoLnNjYWxlKHIsciksdz8oZD1hLGw9YS90KToobD1lLGQ9ZSp0KSxoLmltYWdlU21vb3RoaW5nRW5hYmxlZD0hMCxoLmltYWdlU21vb3RoaW5nUXVhbGl0eT0iaGlnaCJ9LEk9KHQ9e30sYT0xLGU9MCxzPTApPT57Y29uc3R7Yml0bWFwSW1hZ2U6bn09dDtpZighb3x8IW4pcmV0dXJuO2xldCBpLGM7aWYodz8oaT0wLGM9KG8uaGVpZ2h0L3ItbCkvMik6KGk9KG8ud2lkdGgvci1kKS8yLGM9MCksaC5jbGVhclJlY3QoMCwwLG8ud2lkdGgsby5oZWlnaHQpLGEhPT0xKXtjb25zdHtuYXR1cmFsV2lkdGg6ZyxuYXR1cmFsSGVpZ2h0OnV9PXQse3pvb21lZFdpZHRoOmYsem9vbWVkSGVpZ2h0Om19PXYoZyx1LGEpLHt6b29tT2Zmc2V0WDp4LHpvb21PZmZzZXRZOk99PXooe3BvaW50ZXJYOmUscG9pbnRlclk6cyxpbWFnZURhdGE6dCx6b29tZWRXaWR0aDpmLHpvb21lZEhlaWdodDptLGRyYXdXaWR0aDpkLGRyYXdIZWlnaHQ6bH0pO2guZHJhd0ltYWdlKG4seCxPLGYsbSxpLGMsZCxsKX1lbHNlIGguZHJhd0ltYWdlKG4saSxjLGQsbCl9fSkoKTsK",Jo=t=>Uint8Array.from(atob(t),e=>e.charCodeAt(0)),Mt=typeof self<"u"&&self.Blob&&new Blob([Jo(ii)],{type:"text/javascript;charset=utf-8"});function Qo(t){let e;try{if(e=Mt&&(self.URL||self.webkitURL).createObjectURL(Mt),!e)throw"";const i=new Worker(e,{name:t==null?void 0:t.name});return i.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(e)}),i}catch{return new Worker("data:text/javascript;base64,"+ii,{name:t==null?void 0:t.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}const en=new Set(["p","span","div","br","hr","strong","em","b","i","u","s","h1","h2","h3","h4","h5","h6","ul","ol","li","a","img","button","table","thead","tbody","tr","th","td","blockquote","pre","code","label","input","select","option","textarea","svg","path","circle","rect","line","polyline","polygon","ellipse","g","text","tspan","defs","use","symbol","clippath","mask","lineargradient","radialgradient","stop"]),Dt={a:["href","title","target","rel"],img:["src","alt","title","width","height"],button:["type","disabled","name","value"],input:["type","name","value","placeholder","disabled","readonly","checked","min","max","step"],select:["name","disabled","multiple"],option:["value","disabled","selected"],textarea:["name","placeholder","disabled","readonly","rows","cols"],label:["for"],svg:["viewbox","width","height","fill","stroke","xmlns","preserveaspectratio"],path:["d","fill","stroke","stroke-width","stroke-linecap","stroke-linejoin","transform"],circle:["cx","cy","r","fill","stroke","stroke-width"],rect:["x","y","width","height","rx","ry","fill","stroke","stroke-width"],line:["x1","y1","x2","y2","stroke","stroke-width"],polyline:["points","fill","stroke","stroke-width"],polygon:["points","fill","stroke","stroke-width"],ellipse:["cx","cy","rx","ry","fill","stroke","stroke-width"],g:["transform","fill","stroke"],text:["x","y","dx","dy","text-anchor","fill","font-size","font-family","font-weight"],tspan:["x","y","dx","dy"],use:["href","xlink:href","x","y","width","height"],lineargradient:["id","x1","y1","x2","y2","gradientunits"],radialgradient:["id","cx","cy","r","fx","fy","gradientunits"],stop:["offset","stop-color","stop-opacity"],clippath:["id"],mask:["id"],"*":["class","id","style"]},tn=[/javascript:/gi,/vbscript:/gi,/data:/gi,/on\w+\s*=/gi],on=t=>{if(typeof t!="string")return"";const e=document.createElement("template");e.innerHTML=t;const i=o=>{if(Array.from(o.childNodes).forEach(i),o.nodeType===Node.ELEMENT_NODE){const s=o.tagName.toLowerCase();if(!en.has(s)){if(s==="script"||s==="style"){o.remove();return}const l=document.createTextNode(o.textContent);o.parentNode.replaceChild(l,o);return}const r=[...Dt[s]||[],...Dt["*"]||[]];if(Array.from(o.attributes).forEach(l=>{const c=l.name.toLowerCase();if(c.startsWith("on")){o.removeAttribute(l.name);return}if(!r.includes(c)){o.removeAttribute(l.name);return}let h=l.value;tn.forEach(p=>{p.test(h)&&o.removeAttribute(l.name)})}),s==="a"){const l=o.getAttribute("href");l&&(/^(https?:|mailto:|tel:|#|\/)/i.test(l.trim())||o.removeAttribute("href")),o.getAttribute("target")==="_blank"&&o.setAttribute("rel","noopener noreferrer")}if(s==="img"){const l=o.getAttribute("src");l&&(/^(https?:|\/|data:image\/)/i.test(l.trim())||o.removeAttribute("src"))}}};return i(e.content),e.innerHTML},nn=t=>t==="x"?P.X:P.Y,sn=(t,e,i)=>t.filter(o=>nn(o.orientation)===i&&e in o.positions),an=(t,e)=>{const i=document.createElement("button");return i.id=t,i.className="cloudimage-360-hotspot",i.dataset.hotspotId=t,i.setAttribute("type","button"),i.setAttribute("aria-label",e||`Hotspot ${t}`),i.setAttribute("aria-haspopup","true"),i.setAttribute("aria-expanded","false"),i},rn=t=>{const e=Object.entries(t).sort(([s],[r])=>Number(s)-Number(r));let i=null,o=null;const n={};for(const[s,r]of e)if(!r)n[s]={x:i,y:o};else{const{x:a,y:l}=r;a!=null&&(i=a),l!=null&&(o=l),n[s]={x:a||i,y:l||o}}return n},ln=t=>[{name:"offset",options:{offset:[0,10]}},{name:"preventOverflow",options:{boundary:t}}],cn=(t,e)=>{const i=document.createElement("div");return i.className="cloudimage-360-popper",i.id=`cloudimage-360-popper-${e}`,i.dataset.popperId=e,i.setAttribute("role","tooltip"),i.setAttribute("aria-hidden","false"),typeof t=="string"&&/<\/?[a-z][\s\S]*>/i.test(t)?i.innerHTML=on(t):i.textContent=t,document.body.appendChild(i),i},hn=t=>{const e=[...t];return e.forEach((i,o)=>{const n={...rn(i.positions)};e[o].initialPositions=n,e[o].positions=n}),e},dn=({newWidth:t,newHeight:e,initialContainerSize:i,imageAspectRatio:o,hotspotsConfig:n})=>{const[s,r]=i;let a=t,l=e,c=0,h=0;const p=t/e;o>p?(l=t/o,h=(e-l)/2):(a=e*o,c=(t-a)/2);const u=a/s,x=l/r;return n.map(g=>{const v={};return Object.entries(g.initialPositions).forEach(([m,b])=>{v[m]={x:b.x*u+c,y:b.y*x+h}}),{...g,positions:v}})};var D="top",N="bottom",j="right",B="left",ct="auto",Pe=[D,N,j,B],me="start",Xe="end",un="clippingParents",oi="viewport",Oe="popper",pn="reference",Bt=Pe.reduce(function(t,e){return t.concat([e+"-"+me,e+"-"+Xe])},[]),ni=[].concat(Pe,[ct]).reduce(function(t,e){return t.concat([e,e+"-"+me,e+"-"+Xe])},[]),fn="beforeRead",mn="read",vn="afterRead",gn="beforeMain",yn="main",bn="afterMain",wn="beforeWrite",xn="write",In="afterWrite",Cn=[fn,mn,vn,gn,yn,bn,wn,xn,In];function G(t){return t?(t.nodeName||"").toLowerCase():null}function F(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function le(t){var e=F(t).Element;return t instanceof e||t instanceof Element}function W(t){var e=F(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ht(t){if(typeof ShadowRoot>"u")return!1;var e=F(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function En(t){var e=t.state;Object.keys(e.elements).forEach(function(i){var o=e.styles[i]||{},n=e.attributes[i]||{},s=e.elements[i];!W(s)||!G(s)||(Object.assign(s.style,o),Object.keys(n).forEach(function(r){var a=n[r];a===!1?s.removeAttribute(r):s.setAttribute(r,a===!0?"":a)}))})}function Sn(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(o){var n=e.elements[o],s=e.attributes[o]||{},r=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:i[o]),a=r.reduce(function(l,c){return l[c]="",l},{});!W(n)||!G(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}const kn={name:"applyStyles",enabled:!0,phase:"write",fn:En,effect:Sn,requires:["computeStyles"]};function z(t){return t.split("-")[0]}var re=Math.max,je=Math.min,ve=Math.round;function nt(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function si(){return!/^((?!chrome|android).)*safari/i.test(nt())}function ge(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var o=t.getBoundingClientRect(),n=1,s=1;e&&W(t)&&(n=t.offsetWidth>0&&ve(o.width)/t.offsetWidth||1,s=t.offsetHeight>0&&ve(o.height)/t.offsetHeight||1);var r=le(t)?F(t):window,a=r.visualViewport,l=!si()&&i,c=(o.left+(l&&a?a.offsetLeft:0))/n,h=(o.top+(l&&a?a.offsetTop:0))/s,p=o.width/n,f=o.height/s;return{width:p,height:f,top:h,right:c+p,bottom:h+f,left:c,x:c,y:h}}function dt(t){var e=ge(t),i=t.offsetWidth,o=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:o}}function ai(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&ht(i)){var o=e;do{if(o&&t.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function ee(t){return F(t).getComputedStyle(t)}function On(t){return["table","td","th"].indexOf(G(t))>=0}function ie(t){return((le(t)?t.ownerDocument:t.document)||window.document).documentElement}function ze(t){return G(t)==="html"?t:t.assignedSlot||t.parentNode||(ht(t)?t.host:null)||ie(t)}function Zt(t){return!W(t)||ee(t).position==="fixed"?null:t.offsetParent}function Ln(t){var e=/firefox/i.test(nt()),i=/Trident/i.test(nt());if(i&&W(t)){var o=ee(t);if(o.position==="fixed")return null}var n=ze(t);for(ht(n)&&(n=n.host);W(n)&&["html","body"].indexOf(G(n))<0;){var s=ee(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function He(t){for(var e=F(t),i=Zt(t);i&&On(i)&&ee(i).position==="static";)i=Zt(i);return i&&(G(i)==="html"||G(i)==="body"&&ee(i).position==="static")?e:i||Ln(t)||e}function ut(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ae(t,e,i){return re(t,je(e,i))}function An(t,e,i){var o=Ae(t,e,i);return o>i?i:o}function ri(){return{top:0,right:0,bottom:0,left:0}}function li(t){return Object.assign({},ri(),t)}function ci(t,e){return e.reduce(function(i,o){return i[o]=t,i},{})}var Tn=function(e,i){return e=typeof e=="function"?e(Object.assign({},i.rects,{placement:i.placement})):e,li(typeof e!="number"?e:ci(e,Pe))};function Rn(t){var e,i=t.state,o=t.name,n=t.options,s=i.elements.arrow,r=i.modifiersData.popperOffsets,a=z(i.placement),l=ut(a),c=[B,j].indexOf(a)>=0,h=c?"height":"width";if(!(!s||!r)){var p=Tn(n.padding,i),f=dt(s),u=l==="y"?D:B,x=l==="y"?N:j,g=i.rects.reference[h]+i.rects.reference[l]-r[l]-i.rects.popper[h],v=r[l]-i.rects.reference[l],m=He(s),b=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,I=g/2-v/2,w=p[u],C=b-f[h]-p[x],y=b/2-f[h]/2+I,E=Ae(w,y,C),k=l;i.modifiersData[o]=(e={},e[k]=E,e.centerOffset=E-y,e)}}function Xn(t){var e=t.state,i=t.options,o=i.element,n=o===void 0?"[data-popper-arrow]":o;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||ai(e.elements.popper,n)&&(e.elements.arrow=n))}const Yn={name:"arrow",enabled:!0,phase:"main",fn:Rn,effect:Xn,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ye(t){return t.split("-")[1]}var Pn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hn(t,e){var i=t.x,o=t.y,n=e.devicePixelRatio||1;return{x:ve(i*n)/n||0,y:ve(o*n)/n||0}}function Vt(t){var e,i=t.popper,o=t.popperRect,n=t.placement,s=t.variation,r=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,p=t.isFixed,f=r.x,u=f===void 0?0:f,x=r.y,g=x===void 0?0:x,v=typeof h=="function"?h({x:u,y:g}):{x:u,y:g};u=v.x,g=v.y;var m=r.hasOwnProperty("x"),b=r.hasOwnProperty("y"),I=B,w=D,C=window;if(c){var y=He(i),E="clientHeight",k="clientWidth";if(y===F(i)&&(y=ie(i),ee(y).position!=="static"&&a==="absolute"&&(E="scrollHeight",k="scrollWidth")),y=y,n===D||(n===B||n===j)&&s===Xe){w=N;var S=p&&y===C&&C.visualViewport?C.visualViewport.height:y[E];g-=S-o.height,g*=l?1:-1}if(n===B||(n===D||n===N)&&s===Xe){I=j;var O=p&&y===C&&C.visualViewport?C.visualViewport.width:y[k];u-=O-o.width,u*=l?1:-1}}var A=Object.assign({position:a},c&&Pn),H=h===!0?Hn({x:u,y:g},F(i)):{x:u,y:g};if(u=H.x,g=H.y,l){var T;return Object.assign({},A,(T={},T[w]=b?"0":"",T[I]=m?"0":"",T.transform=(C.devicePixelRatio||1)<=1?"translate("+u+"px, "+g+"px)":"translate3d("+u+"px, "+g+"px, 0)",T))}return Object.assign({},A,(e={},e[w]=b?g+"px":"",e[I]=m?u+"px":"",e.transform="",e))}function Mn(t){var e=t.state,i=t.options,o=i.gpuAcceleration,n=o===void 0?!0:o,s=i.adaptive,r=s===void 0?!0:s,a=i.roundOffsets,l=a===void 0?!0:a,c={placement:z(e.placement),variation:ye(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Vt(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Vt(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Dn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Mn,data:{}};var Fe={passive:!0};function Bn(t){var e=t.state,i=t.instance,o=t.options,n=o.scroll,s=n===void 0?!0:n,r=o.resize,a=r===void 0?!0:r,l=F(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(h){h.addEventListener("scroll",i.update,Fe)}),a&&l.addEventListener("resize",i.update,Fe),function(){s&&c.forEach(function(h){h.removeEventListener("scroll",i.update,Fe)}),a&&l.removeEventListener("resize",i.update,Fe)}}const Zn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Bn,data:{}};var Vn={left:"right",right:"left",bottom:"top",top:"bottom"};function We(t){return t.replace(/left|right|bottom|top/g,function(e){return Vn[e]})}var Fn={start:"end",end:"start"};function Ft(t){return t.replace(/start|end/g,function(e){return Fn[e]})}function pt(t){var e=F(t),i=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:i,scrollTop:o}}function ft(t){return ge(ie(t)).left+pt(t).scrollLeft}function Wn(t,e){var i=F(t),o=ie(t),n=i.visualViewport,s=o.clientWidth,r=o.clientHeight,a=0,l=0;if(n){s=n.width,r=n.height;var c=si();(c||!c&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:s,height:r,x:a+ft(t),y:l}}function Nn(t){var e,i=ie(t),o=pt(t),n=(e=t.ownerDocument)==null?void 0:e.body,s=re(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),r=re(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-o.scrollLeft+ft(t),l=-o.scrollTop;return ee(n||i).direction==="rtl"&&(a+=re(i.clientWidth,n?n.clientWidth:0)-s),{width:s,height:r,x:a,y:l}}function mt(t){var e=ee(t),i=e.overflow,o=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+o)}function hi(t){return["html","body","#document"].indexOf(G(t))>=0?t.ownerDocument.body:W(t)&&mt(t)?t:hi(ze(t))}function Te(t,e){var i;e===void 0&&(e=[]);var o=hi(t),n=o===((i=t.ownerDocument)==null?void 0:i.body),s=F(o),r=n?[s].concat(s.visualViewport||[],mt(o)?o:[]):o,a=e.concat(r);return n?a:a.concat(Te(ze(r)))}function st(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function jn(t,e){var i=ge(t,!1,e==="fixed");return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}function Wt(t,e,i){return e===oi?st(Wn(t,i)):le(e)?jn(e,i):st(Nn(ie(t)))}function _n(t){var e=Te(ze(t)),i=["absolute","fixed"].indexOf(ee(t).position)>=0,o=i&&W(t)?He(t):t;return le(o)?e.filter(function(n){return le(n)&&ai(n,o)&&G(n)!=="body"}):[]}function $n(t,e,i,o){var n=e==="clippingParents"?_n(t):[].concat(e),s=[].concat(n,[i]),r=s[0],a=s.reduce(function(l,c){var h=Wt(t,c,o);return l.top=re(h.top,l.top),l.right=je(h.right,l.right),l.bottom=je(h.bottom,l.bottom),l.left=re(h.left,l.left),l},Wt(t,r,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function di(t){var e=t.reference,i=t.element,o=t.placement,n=o?z(o):null,s=o?ye(o):null,r=e.x+e.width/2-i.width/2,a=e.y+e.height/2-i.height/2,l;switch(n){case D:l={x:r,y:e.y-i.height};break;case N:l={x:r,y:e.y+e.height};break;case j:l={x:e.x+e.width,y:a};break;case B:l={x:e.x-i.width,y:a};break;default:l={x:e.x,y:e.y}}var c=n?ut(n):null;if(c!=null){var h=c==="y"?"height":"width";switch(s){case me:l[c]=l[c]-(e[h]/2-i[h]/2);break;case Xe:l[c]=l[c]+(e[h]/2-i[h]/2);break}}return l}function Ye(t,e){e===void 0&&(e={});var i=e,o=i.placement,n=o===void 0?t.placement:o,s=i.strategy,r=s===void 0?t.strategy:s,a=i.boundary,l=a===void 0?un:a,c=i.rootBoundary,h=c===void 0?oi:c,p=i.elementContext,f=p===void 0?Oe:p,u=i.altBoundary,x=u===void 0?!1:u,g=i.padding,v=g===void 0?0:g,m=li(typeof v!="number"?v:ci(v,Pe)),b=f===Oe?pn:Oe,I=t.rects.popper,w=t.elements[x?b:f],C=$n(le(w)?w:w.contextElement||ie(t.elements.popper),l,h,r),y=ge(t.elements.reference),E=di({reference:y,element:I,placement:n}),k=st(Object.assign({},I,E)),S=f===Oe?k:y,O={top:C.top-S.top+m.top,bottom:S.bottom-C.bottom+m.bottom,left:C.left-S.left+m.left,right:S.right-C.right+m.right},A=t.modifiersData.offset;if(f===Oe&&A){var H=A[n];Object.keys(O).forEach(function(T){var U=[j,N].indexOf(T)>=0?1:-1,K=[D,N].indexOf(T)>=0?"y":"x";O[T]+=H[K]*U})}return O}function zn(t,e){e===void 0&&(e={});var i=e,o=i.placement,n=i.boundary,s=i.rootBoundary,r=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=l===void 0?ni:l,h=ye(o),p=h?a?Bt:Bt.filter(function(x){return ye(x)===h}):Pe,f=p.filter(function(x){return c.indexOf(x)>=0});f.length===0&&(f=p);var u=f.reduce(function(x,g){return x[g]=Ye(t,{placement:g,boundary:n,rootBoundary:s,padding:r})[z(g)],x},{});return Object.keys(u).sort(function(x,g){return u[x]-u[g]})}function Gn(t){if(z(t)===ct)return[];var e=We(t);return[Ft(t),e,Ft(e)]}function Un(t){var e=t.state,i=t.options,o=t.name;if(!e.modifiersData[o]._skip){for(var n=i.mainAxis,s=n===void 0?!0:n,r=i.altAxis,a=r===void 0?!0:r,l=i.fallbackPlacements,c=i.padding,h=i.boundary,p=i.rootBoundary,f=i.altBoundary,u=i.flipVariations,x=u===void 0?!0:u,g=i.allowedAutoPlacements,v=e.options.placement,m=z(v),b=m===v,I=l||(b||!x?[We(v)]:Gn(v)),w=[v].concat(I).reduce(function(te,_){return te.concat(z(_)===ct?zn(e,{placement:_,boundary:h,rootBoundary:p,padding:c,flipVariations:x,allowedAutoPlacements:g}):_)},[]),C=e.rects.reference,y=e.rects.popper,E=new Map,k=!0,S=w[0],O=0;O<w.length;O++){var A=w[O],H=z(A),T=ye(A)===me,U=[D,N].indexOf(H)>=0,K=U?"width":"height",X=Ye(e,{placement:A,boundary:h,rootBoundary:p,altBoundary:f,padding:c}),V=U?T?j:B:T?N:D;C[K]>y[K]&&(V=We(V));var ce=We(V),q=[];if(s&&q.push(X[H]<=0),a&&q.push(X[V]<=0,X[ce]<=0),q.every(function(te){return te})){S=A,k=!1;break}E.set(A,q)}if(k)for(var he=x?3:1,be=function(_){var ne=w.find(function(se){var J=E.get(se);if(J)return J.slice(0,_).every(function(ue){return ue})});if(ne)return S=ne,"break"},oe=he;oe>0;oe--){var de=be(oe);if(de==="break")break}e.placement!==S&&(e.modifiersData[o]._skip=!0,e.placement=S,e.reset=!0)}}const Kn={name:"flip",enabled:!0,phase:"main",fn:Un,requiresIfExists:["offset"],data:{_skip:!1}};function Nt(t,e,i){return i===void 0&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function jt(t){return[D,j,N,B].some(function(e){return t[e]>=0})}function qn(t){var e=t.state,i=t.name,o=e.rects.reference,n=e.rects.popper,s=e.modifiersData.preventOverflow,r=Ye(e,{elementContext:"reference"}),a=Ye(e,{altBoundary:!0}),l=Nt(r,o),c=Nt(a,n,s),h=jt(l),p=jt(c);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const Jn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:qn};function Qn(t,e,i){var o=z(t),n=[B,D].indexOf(o)>=0?-1:1,s=typeof i=="function"?i(Object.assign({},e,{placement:t})):i,r=s[0],a=s[1];return r=r||0,a=(a||0)*n,[B,j].indexOf(o)>=0?{x:a,y:r}:{x:r,y:a}}function es(t){var e=t.state,i=t.options,o=t.name,n=i.offset,s=n===void 0?[0,0]:n,r=ni.reduce(function(h,p){return h[p]=Qn(p,e.rects,s),h},{}),a=r[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[o]=r}const ts={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:es};function is(t){var e=t.state,i=t.name;e.modifiersData[i]=di({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const os={name:"popperOffsets",enabled:!0,phase:"read",fn:is,data:{}};function ns(t){return t==="x"?"y":"x"}function ss(t){var e=t.state,i=t.options,o=t.name,n=i.mainAxis,s=n===void 0?!0:n,r=i.altAxis,a=r===void 0?!1:r,l=i.boundary,c=i.rootBoundary,h=i.altBoundary,p=i.padding,f=i.tether,u=f===void 0?!0:f,x=i.tetherOffset,g=x===void 0?0:x,v=Ye(e,{boundary:l,rootBoundary:c,padding:p,altBoundary:h}),m=z(e.placement),b=ye(e.placement),I=!b,w=ut(m),C=ns(w),y=e.modifiersData.popperOffsets,E=e.rects.reference,k=e.rects.popper,S=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,O=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),A=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,H={x:0,y:0};if(y){if(s){var T,U=w==="y"?D:B,K=w==="y"?N:j,X=w==="y"?"height":"width",V=y[w],ce=V+v[U],q=V-v[K],he=u?-k[X]/2:0,be=b===me?E[X]:k[X],oe=b===me?-k[X]:-E[X],de=e.elements.arrow,te=u&&de?dt(de):{width:0,height:0},_=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ri(),ne=_[U],se=_[K],J=Ae(0,E[X],te[X]),ue=I?E[X]/2-he-J-ne-O.mainAxis:be-J-ne-O.mainAxis,Ge=I?-E[X]/2+he+J+se+O.mainAxis:oe+J+se+O.mainAxis,we=e.elements.arrow&&He(e.elements.arrow),Ue=we?w==="y"?we.clientTop||0:we.clientLeft||0:0,Me=(T=A==null?void 0:A[w])!=null?T:0,Ke=V+ue-Me-Ue,qe=V+Ge-Me,De=Ae(u?je(ce,Ke):ce,V,u?re(q,qe):q);y[w]=De,H[w]=De-V}if(a){var Be,Je=w==="x"?D:B,Qe=w==="x"?N:j,Q=y[C],pe=C==="y"?"height":"width",xe=Q+v[Je],fe=Q-v[Qe],ae=[D,B].indexOf(m)!==-1,Ie=(Be=A==null?void 0:A[C])!=null?Be:0,Ce=ae?xe:Q-E[pe]-k[pe]-Ie+O.altAxis,Ee=ae?Q+E[pe]+k[pe]-Ie-O.altAxis:fe,Se=u&&ae?An(Ce,Q,Ee):Ae(u?Ce:xe,Q,u?Ee:fe);y[C]=Se,H[C]=Se-Q}e.modifiersData[o]=H}}const as={name:"preventOverflow",enabled:!0,phase:"main",fn:ss,requiresIfExists:["offset"]};function rs(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ls(t){return t===F(t)||!W(t)?pt(t):rs(t)}function cs(t){var e=t.getBoundingClientRect(),i=ve(e.width)/t.offsetWidth||1,o=ve(e.height)/t.offsetHeight||1;return i!==1||o!==1}function hs(t,e,i){i===void 0&&(i=!1);var o=W(e),n=W(e)&&cs(e),s=ie(e),r=ge(t,n,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(o||!o&&!i)&&((G(e)!=="body"||mt(s))&&(a=ls(e)),W(e)?(l=ge(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=ft(s))),{x:r.left+a.scrollLeft-l.x,y:r.top+a.scrollTop-l.y,width:r.width,height:r.height}}function ds(t){var e=new Map,i=new Set,o=[];t.forEach(function(s){e.set(s.name,s)});function n(s){i.add(s.name);var r=[].concat(s.requires||[],s.requiresIfExists||[]);r.forEach(function(a){if(!i.has(a)){var l=e.get(a);l&&n(l)}}),o.push(s)}return t.forEach(function(s){i.has(s.name)||n(s)}),o}function us(t){var e=ds(t);return Cn.reduce(function(i,o){return i.concat(e.filter(function(n){return n.phase===o}))},[])}function ps(t){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(t())})})),e}}function fs(t){var e=t.reduce(function(i,o){var n=i[o.name];return i[o.name]=n?Object.assign({},n,o,{options:Object.assign({},n.options,o.options),data:Object.assign({},n.data,o.data)}):o,i},{});return Object.keys(e).map(function(i){return e[i]})}var _t={placement:"bottom",modifiers:[],strategy:"absolute"};function $t(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function ms(t){t===void 0&&(t={});var e=t,i=e.defaultModifiers,o=i===void 0?[]:i,n=e.defaultOptions,s=n===void 0?_t:n;return function(a,l,c){c===void 0&&(c=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},_t,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],f=!1,u={state:h,setOptions:function(m){var b=typeof m=="function"?m(h.options):m;g(),h.options=Object.assign({},s,h.options,b),h.scrollParents={reference:le(a)?Te(a):a.contextElement?Te(a.contextElement):[],popper:Te(l)};var I=us(fs([].concat(o,h.options.modifiers)));return h.orderedModifiers=I.filter(function(w){return w.enabled}),x(),u.update()},forceUpdate:function(){if(!f){var m=h.elements,b=m.reference,I=m.popper;if($t(b,I)){h.rects={reference:hs(b,He(I),h.options.strategy==="fixed"),popper:dt(I)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(O){return h.modifiersData[O.name]=Object.assign({},O.data)});for(var w=0;w<h.orderedModifiers.length;w++){if(h.reset===!0){h.reset=!1,w=-1;continue}var C=h.orderedModifiers[w],y=C.fn,E=C.options,k=E===void 0?{}:E,S=C.name;typeof y=="function"&&(h=y({state:h,options:k,name:S,instance:u})||h)}}}},update:ps(function(){return new Promise(function(v){u.forceUpdate(),v(h)})}),destroy:function(){g(),f=!0}};if(!$t(a,l))return u;u.setOptions(c).then(function(v){!f&&c.onFirstUpdate&&c.onFirstUpdate(v)});function x(){h.orderedModifiers.forEach(function(v){var m=v.name,b=v.options,I=b===void 0?{}:b,w=v.effect;if(typeof w=="function"){var C=w({state:h,name:m,instance:u,options:I}),y=function(){};p.push(C||y)}})}function g(){p.forEach(function(v){return v()}),p=[]}return u}}var vs=[Zn,os,Dn,kn,ts,Kn,as,Yn,Jn],gs=ms({defaultModifiers:vs});class ys{constructor(e,i,o){gt(this,"updateHotspotPosition",(e,i)=>{this.currentActiveIndex=e,this.currentOrientation=i;const o=sn(this.hotspotsConfig,e,i);this.hideHotspots(),o.forEach(n=>this.updateAndShowHotspot(n,e))});this.container=i,this.popper=null,this.popperInstance=null,this.hotspotsContainer=xo(this.container),this.hotspotsConfig=hn(e),this.shouldHidePopper=!0,this.hidePopper=this.hidePopper.bind(this),this.imageAspectRatio=o,this.hotspotElements=new Map,this.popperListeners=[];const{containerSize:n}=e[0];this.initialContainerSize=n||[i.offsetWidth,i.offsetHeight],this.initHotspots(),this.observeContainerResize()}observeContainerResize(){this.resizeObserver=new ResizeObserver(()=>{const e=this.container.offsetWidth,i=this.container.offsetHeight;this.updateHotspotsForResize(e,i)}),this.resizeObserver.observe(this.container)}updateHotspotsForResize(e,i){this.hotspotsConfig=dn({newWidth:e,newHeight:i,initialContainerSize:this.initialContainerSize,imageAspectRatio:this.imageAspectRatio,hotspotsConfig:this.hotspotsConfig}),this.updateHotspotPosition(this.currentActiveIndex,this.currentOrientation)}cleanupPopperListeners(){this.popperListeners.forEach(({element:e,event:i,handler:o})=>{e.removeEventListener(i,o)}),this.popperListeners=[]}showPopper({hotspotElement:e,content:i,id:o,keepOpen:n}){this.popperInstance&&this.popperInstance.instanceId!==o&&this.hidePopper();const s={placement:"top",modifiers:ln(this.container)};this.popper=cn(i,o),this.popper.setAttribute("data-show",""),this.currentHotspotElement=e,e.setAttribute("aria-expanded","true"),e.setAttribute("aria-describedby",`cloudimage-360-popper-${o}`);const r=()=>{this.shouldHidePopper=!1},a=()=>{this.shouldHidePopper=!0,this.checkAndHidePopper()},l=()=>{this.shouldHidePopper=!0,this.checkAndHidePopper()},c=()=>{this.shouldHidePopper=!1,this.hidePopperTimeout&&clearTimeout(this.hidePopperTimeout)};this.popper.addEventListener("mouseenter",r),this.popper.addEventListener("mouseleave",a),e.addEventListener("mouseleave",l),e.addEventListener("mouseenter",c),this.popperListeners.push({element:this.popper,event:"mouseenter",handler:r},{element:this.popper,event:"mouseleave",handler:a},{element:e,event:"mouseleave",handler:l},{element:e,event:"mouseenter",handler:c}),this.popperInstance={...gs(e,this.popper,s),keepOpen:n,instanceId:o}}checkAndHidePopper(){var e;this.shouldHidePopper&&!((e=this.popperInstance)!=null&&e.keepOpen)&&(this.hidePopperTimeout=setTimeout(()=>{this.shouldHidePopper&&this.hidePopper()},$i))}hidePopper(){if(this.cleanupPopperListeners(),this.currentHotspotElement&&(this.currentHotspotElement.setAttribute("aria-expanded","false"),this.currentHotspotElement.removeAttribute("aria-describedby"),this.currentHotspotElement=null),this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=null),this.popper){this.popper.removeAttribute("data-show"),this.popper.setAttribute("aria-hidden","true");const e=this.popper;this.popper=null,setTimeout(()=>{e.remove()},zi)}}createHotspot(e){const{id:i,content:o,keepOpen:n,onClick:s,label:r}=e,a=an(i,r);s&&(a.style.cursor="pointer"),a.onclick=l=>{l.stopPropagation(),s==null||s(l,this.popperInstance,i)},o&&(a.addEventListener("mouseenter",()=>this.showPopper({hotspotElement:a,content:o,id:i,keepOpen:n})),a.addEventListener("focus",()=>this.showPopper({hotspotElement:a,content:o,id:i,keepOpen:n})),a.addEventListener("blur",()=>{this.shouldHidePopper=!0,this.checkAndHidePopper()})),this.hotspotsContainer.appendChild(a)}hideHotspots(){this.hotspotsContainer.querySelectorAll(".cloudimage-360-hotspot").forEach(e=>{e.style.opacity=0,e.style.pointerEvents="none"})}updateAndShowHotspot(e,i){const{positions:o,id:n}=e,{x:s,y:r}=o[i]??{},a=this.hotspotsContainer.querySelector(`[data-hotspot-id="${n}"]`);a&&(a.style.translate=`${s}px ${r}px`,a.style.opacity=1,a.style.pointerEvents="all")}showHotspotById(e){const i=this.hotspotsConfig.find(n=>n.id===e);if(!i||!i.content)return;const o=this.hotspotsContainer.querySelector(`[data-hotspot-id="${e}"]`);o&&o.style.opacity==="1"&&this.showPopper({hotspotElement:o,content:i.content,id:e,keepOpen:i.keepOpen})}createAllHotspots(){this.hotspotsConfig.forEach(e=>this.createHotspot(e))}initHotspots(){this.createAllHotspots()}destroy(){this.hidePopperTimeout&&clearTimeout(this.hidePopperTimeout),this.resizeObserver.disconnect(),this.hidePopper(),this.hotspotElements.clear(),this.hotspotsContainer.innerHTML=""}}class _e{constructor(e,i,o){this.container=e,this.isClicked=!1,this.fullscreenView=!!o,this.imagesX=[],this.imagesY=[],this.devicePixelRatio=Math.round(window.devicePixelRatio||1),this.id=e.id,this.movementStart={x:0,y:0},this.draggingDirection=null,this.isReady=!1,this.velocityX=0,this.velocityY=0,this.lastDragTime=0,this.lastDragX=0,this.lastDragY=0,this.inertiaAnimationId=null,this.hasInteracted=!1,this.currentZoomScale=1,this.touchDevice=Ko(),this.dragJustEnded=!1,this.isPinching=!1,this.initialPinchDistance=0,this.pinchZoomLevel=1,this.pinchZoomEmitted=!1,this.lastEmittedZoom=1,this.panOffsetX=0,this.panOffsetY=0,this.canvasWorker=new Qo,this.hotspotTimeline=null,this.hotspotTimelineIndicator=null,this.isAnimatingToFrame=!1,this.onMoveHandler=this.onMoveHandler.bind(this),this.destroy=this.destroy.bind(this),this.init(this.container,i)}emit(e,i={}){const o=this[e];typeof o=="function"&&o({...i,viewerId:this.id})}announce(e){Co(this.ariaLiveRegion,e)}mouseDown(e){if(!this.isReady||this.glass)return;const{pageX:i,pageY:o}=e;this.hideHints(),this.hideHotspotPopper(),this.inertiaAnimationId&&(cancelAnimationFrame(this.inertiaAnimationId),this.inertiaAnimationId=null),this.autoplayJustStopped=!1,(this.autoplay||this.loopTimeoutId)&&(this.stopAutoplay(),this.autoplay=!1,this.autoplayJustStopped=!0),this.movementStart={x:i,y:o},this.isClicked=!0,this.isDragging=!1,this.inertia&&(this.velocityX=0,this.velocityY=0,this.lastDragTime=performance.now(),this.lastDragX=i,this.lastDragY=o)}mouseUp(){this.isReady&&(!this.isZoomed&&!this.autoplayJustStopped&&this.showAllIcons(),this.inertia&&this.isDragging&&(Math.abs(this.velocityX)>.1||Math.abs(this.velocityY)>.1)&&this.startInertia(),this.isDragging&&(this.emit("onDragEnd"),this.dragJustEnded=!0),this.movementStart={x:0,y:0},this.isClicked=!1,this.isDragging=!1,this.innerBox.style.cursor="grab")}startInertia(){const o=this.fullscreenView?document.body:this.container,n=this.dragSpeed/Ct,s=n*(this.amountX/o.offsetWidth),r=n*(this.amountY/o.offsetHeight),a=()=>{if(this.velocityX*=.95,this.velocityY*=.95,Math.abs(this.velocityX)<.01&&Math.abs(this.velocityY)<.01){this.inertiaAnimationId=null;return}const l=this.velocityX*16,c=this.velocityY*16,h=Ht({deltaX:l,deltaY:c,reversed:this.dragReverse,allowSpinX:this.allowSpinX,allowSpinY:this.allowSpinY});if(h){const p=this.allowSpinX?Math.max(1,Math.abs(Math.round(l*s))):0,f=this.allowSpinY?Math.max(1,Math.abs(Math.round(c*r))):0;(p>0||f>0)&&this.onMoveHandler(h,p,f)}this.inertiaAnimationId=requestAnimationFrame(a)};this.inertiaAnimationId=requestAnimationFrame(a)}drag(e,i){if(!this.isReady||!this.isClicked)return;const o=e-this.movementStart.x,n=i-this.movementStart.y;if(this.inertia){const f=performance.now(),u=f-this.lastDragTime;u>0&&u<100&&(this.velocityX=(e-this.lastDragX)/u,this.velocityY=(i-this.lastDragY)/u),this.lastDragTime=f,this.lastDragX=e,this.lastDragY=i}this.draggingDirection=Ht({deltaX:o,deltaY:n,reversed:this.dragReverse,allowSpinX:this.allowSpinX,allowSpinY:this.allowSpinY})||this.draggingDirection;const s=this.fullscreenView?document.body:this.container,r=this.dragSpeed/Ct,a=r*(this.amountX/s.offsetWidth),l=r*(this.amountY/s.offsetHeight),c=this.allowSpinX?Math.abs(Math.round(o*a)):0,h=this.allowSpinY?Math.abs(Math.round(n*l)):0;(this.allowSpinX&&c!==0||this.allowSpinY&&h!==0)&&(this.hasInteracted=!0,this.hideHotspotPopper(),this.onMoveHandler(this.draggingDirection,c,h),this.movementStart={x:e,y:i},setTimeout(()=>{this.isDragging||(this.isDragging=!0,this.emit("onDragStart"))},_i))}mouseMove(e){!this.isReady||!this.isClicked&&!this.isZoomed||this.glass||(this.hideAllIcons(),this.drag(e.pageX,e.pageY),this.isZoomed&&this.applyZoom(e))}mouseClick(e){if(!(!this.isReady||this.isDragging)){if(this.dragJustEnded){this.dragJustEnded=!1;return}if(this.autoplayJustStopped){this.autoplayJustStopped=!1;return}if(this.glass&&this.magnified){this.removeGlass();return}this.pointerZoom&&!this.glass&&!this.touchDevice&&this.toggleZoom(e)}}loadHigherQualityImages(e,i){const o=Le(this.srcXConfig,e),n=this.allowSpinY?Le(this.srcYConfig,e):null;St({cdnPathX:o,cdnPathY:n,configX:this.srcXConfig,configY:this.srcYConfig,onAllImagesLoad:(s,r)=>{this.imagesX=s,this.imagesY=r,i()},onError:s=>this.emit("onError",s)})}hideHotspots(){this.hotspotsInstance&&this.hotspotsInstance.hideHotspots()}hideHotspotPopper(){this.hotspotsInstance&&this.hotspotsInstance.hidePopper()}toggleZoom(e){if(this.isZoomed)this.showTransitionOverlay(),setTimeout(()=>{this.removeZoom()},It);else{let i=(this.fullscreenView||this.pointerZoom?document.body:this.container).offsetWidth;this.hideHotspots(),this.showLoadingSpinner(),this.loadHigherQualityImages(i,()=>{this.showTransitionOverlay(),setTimeout(()=>{this.applyZoom(e)},It)})}}removeZoom(){this.isZoomed=!1,this.updateView(),this.showAllIcons(),this.hideTransitionOverlay(),this.emit("onZoomOut"),this.announce("Zoomed out")}mouseLeave(){this.isZoomed&&this.removeZoom()}applyZoom(e){const{offsetX:i,offsetY:o}=jo(e,this.canvas,this.devicePixelRatio);this.isZoomed=!0,this.hideAllIcons(),this.hideLoadingSpinner(),this.hideTransitionOverlay(),this.updateView(this.pointerZoom,i,o),this.emit("onZoomIn",{zoomLevel:this.pointerZoom}),this.announce("Zoomed in. Move mouse to pan. Click to zoom out.")}touchOutside(e){if(!this.glass)return;!this.canvas.contains(e.target)&&this.removeGlass()}touchStart(e){if(!this.isReady||this.glass||!e.touches||!e.touches.length)return;const i=e.target;if(i&&i.closest&&i.closest(".cloudimage-360-button"))return;if(this.hideHints(),e.touches.length===2&&this.pinchZoom&&!this.isDragging){e.preventDefault(),this.isPinching=!0,this.isClicked=!1,this.inertiaAnimationId&&(cancelAnimationFrame(this.inertiaAnimationId),this.inertiaAnimationId=null);const s=e.touches[0],r=e.touches[1];if(this.initialPinchDistance=this.getPinchDistance(s,r),(this.autoplay||this.loopTimeoutId)&&(this.stopAutoplay(),this.autoplay=!1),!this.isZoomed&&this.pinchZoomLevel===1){const a=(this.fullscreenView?document.body:this.container).offsetWidth;this.hideHotspots(),this.loadHigherQualityImages(a,()=>{})}return}if(e.touches.length>1)return;const{pageX:o,pageY:n}=e.touches[0];this.inertiaAnimationId&&(cancelAnimationFrame(this.inertiaAnimationId),this.inertiaAnimationId=null),(this.autoplay||this.loopTimeoutId)&&(this.stopAutoplay(),this.autoplay=!1),this.hideAllIcons(),this.hideHotspotPopper(),this.movementStart={x:o,y:n},this.isClicked=!0,this.isDragging=!1,this.inertia&&(this.velocityX=0,this.velocityY=0,this.lastDragTime=performance.now(),this.lastDragX=o,this.lastDragY=n)}getPinchDistance(e,i){const o=e.pageX-i.pageX,n=e.pageY-i.pageY;return Math.sqrt(o*o+n*n)}getPinchCenter(e,i){return{x:(e.pageX+i.pageX)/2,y:(e.pageY+i.pageY)/2}}touchEnd(e){if(this.isReady){if(this.isPinching){if(!e.touches||e.touches.length<2){if(this.isPinching=!1,this.initialPinchDistance=0,this.pinchZoomLevel<=1){const i=this.pinchZoomEmitted;this.pinchZoomLevel=1,this.pinchZoomEmitted=!1,this.lastEmittedZoom=1,this.isZoomed=!1,this.panOffsetX=0,this.panOffsetY=0,this.showAllIcons(),this.updateView(),i&&this.emit("onZoomOut")}else if(this.canvas){const i=this.canvas.getBoundingClientRect();this.panOffsetX=i.width/2*this.devicePixelRatio,this.panOffsetY=i.height/2*this.devicePixelRatio}}return}this.showAllIcons(),this.inertia&&this.isDragging&&(Math.abs(this.velocityX)>.1||Math.abs(this.velocityY)>.1)&&this.startInertia(),this.movementStart={x:0,y:0},this.isClicked=!1,this.isDragging=!1}}touchMove(e){if(!this.isReady||this.glass)return;if(this.isPinching&&e.touches.length===2){e.preventDefault();const n=e.touches[0],s=e.touches[1],r=this.getPinchDistance(n,s);if(this.initialPinchDistance===0){this.initialPinchDistance=r;return}const a=r/this.initialPinchDistance,l=Math.max(1,Math.min(this.pinchZoomLevel*a,Et));if(this.initialPinchDistance=r,this.pinchZoomLevel=l,!this.canvas)return;const c=this.canvas.getBoundingClientRect(),h=c.width/2*this.devicePixelRatio,p=c.height/2*this.devicePixelRatio;l>1?(this.isZoomed=!0,this.hideAllIcons(),this.updateView(l,h,p),(!this.pinchZoomEmitted||l>this.lastEmittedZoom)&&(this.emit("onZoomIn",{zoomLevel:l}),this.pinchZoomEmitted=!0,this.lastEmittedZoom=l)):(this.isZoomed=!1,this.panOffsetX=0,this.panOffsetY=0,this.updateView());return}if(!this.isClicked||!e.touches||!e.touches[0])return;const{pageX:i,pageY:o}=e.touches[0];if(e.preventDefault(),this.isZoomed&&this.pinchZoomLevel>1){const n=i-this.movementStart.x,s=o-this.movementStart.y;this.panOffsetX-=n*this.devicePixelRatio,this.panOffsetY-=s*this.devicePixelRatio,this.movementStart={x:i,y:o},this.updateView(this.pinchZoomLevel,this.panOffsetX,this.panOffsetY);return}this.drag(i,o)}keyDown(e){if(!this.isReady)return;const{keyCode:i}=e,o=this.keysReverse;switch(this.autoplay&&this.stopAutoplay(),Pt(i,this.allowSpinY)&&(this.hasInteracted=!0,this.hideAllIcons(),this.hideHints()),i){case 37:o?this.moveLeft():this.moveRight();break;case 39:o?this.moveRight():this.moveLeft();break;case 38:this.allowSpinY&&(e.preventDefault(),o?this.moveTop():this.moveBottom());break;case 40:this.allowSpinY&&(e.preventDefault(),o?this.moveBottom():this.moveTop());break}}keyUp(e){const{keyCode:i}=e;Pt(i,this.allowSpinY)&&this.showAllIcons()}moveActiveXIndexUp(e){this.orientation=P.X,this.activeImageX=(this.activeImageX+e)%this.amountX}moveActiveXIndexDown(e){this.orientation=P.X,this.activeImageX=(this.activeImageX-e+this.amountX)%this.amountX}moveActiveYIndexUp(e){this.orientation=P.Y,this.activeImageY=(this.activeImageY+e)%this.amountY}moveActiveYIndexDown(e){this.orientation=P.Y,this.activeImageY=(this.activeImageY-e+this.amountY)%this.amountY}moveRight(e,i=1){e&&this.activeImageX>=this.imagesX.length-1||(this.moveActiveXIndexUp(i),this.isZoomed||this.updateView())}moveLeft(e,i=1){e&&this.activeImageX<=0||(this.moveActiveXIndexDown(i),this.isZoomed||this.updateView())}moveTop(e,i=1){e&&this.activeImageY>=this.imagesY.length-1||(this.moveActiveYIndexUp(i),this.isZoomed||this.updateView())}moveBottom(e,i=1){e&&this.activeImageY<=0||(this.moveActiveYIndexDown(i),this.isZoomed||this.updateView())}onMoveHandler(e,i=1,o=1){e==="right"?this.moveRight(this.stopAtEdges,i):e==="left"?this.moveLeft(this.stopAtEdges,i):e==="up"?this.moveTop(this.stopAtEdges,o):e==="down"&&this.moveBottom(this.stopAtEdges,o),this.emit("onSpin",{direction:e,activeImageX:this.activeImageX,activeImageY:this.activeImageY,amountX:this.amountX,amountY:this.amountY})}updateView(e,i,o){const n=this.orientation===P.X?this.activeImageX:this.activeImageY,s=this.orientation===P.X?this.imagesX[this.activeImageX]:this.imagesY[this.activeImageY];this.hotspotsInstance&&!this.isZoomed&&!this.autoplay&&this.hotspotsInstance.updateHotspotPosition(n,this.orientation),this.hotspotTimelineIndicator&&this.orientation===P.X&&this.updateHotspotTimelinePosition(),this.drawImageOnCanvas(s,e,i,o)}updatePercentageInLoader(e=0){this.loader&&(this.loader.innerText=e+"%")}adaptCanvasSize(e){const{naturalWidth:i,naturalHeight:o}=e;this.imageAspectRatio=i/o;const n=this.fullscreenView?window.innerWidth:this.canvas.clientWidth,s=this.fullscreenView?window.innerHeight:this.canvas.clientHeight;this.canvasWorker.postMessage({action:"adaptCanvasSize",devicePixelRatio:this.devicePixelRatio,imageAspectRatio:this.imageAspectRatio,containerWidth:n,containerHeight:s})}drawImageOnCanvas(e,i=1,o=0,n=0){this.canvasWorker.postMessage({action:"drawImageOnCanvas",imageData:e,zoomScale:i,pointerX:o,pointerY:n})}pushImageToSet(e,i,o){o===P.X?this.imagesX[i]=e:this.imagesY[i]=e}calculatePercentage(){const e=this.amountX+this.amountY,i=this.imagesX.length+this.imagesY.length;return Math.round(i/e*100)}onImageLoad(e,i,o){this.pushImageToSet(e,i,o),this.updatePercentageInLoader(this.calculatePercentage())}onFirstImageLoaded(e,i){this.createContainers(e),this.adaptCanvasSize(i),this.drawImageOnCanvas(i)}onAllImagesLoaded(){if(this.addAllIcons(),this.isReady=!0,this.amountX=this.imagesX.length,this.amountY=this.imagesY.length,this.activeImageX=this.autoplayReverse?this.amountX-1:0,this.activeImageY=this.autoplayReverse?this.amountY-1:0,this.hotspots&&(this.hotspotsInstance=new ys(this.hotspots,this.innerBox,this.imageAspectRatio),this.addHotspotTimeline(),this.showHotspotTimeline()),this.emit("onLoad",{imagesX:this.imagesX.length,imagesY:this.imagesY.length}),this.emit("onReady"),this.announce("360 degree view loaded. Use mouse drag or arrow keys to rotate."),this.hints!==!1&&!this.autoplay){const e=this.hints===!0||this.hints===void 0?Lt(this.viewerConfig,this.touchDevice):this.hints;e&&e.length>0&&(this.hintsOverlay=Ot(this.innerBox,e),At(this.hintsOverlay))}this.autoplay&&(this.hideAllIcons(),qo(this.play.bind(this))())}magnify(e){e.stopPropagation();const{src:i}=this.orientation===P.Y?this.imagesY[this.activeImageY]:this.imagesX[this.activeImageX],n=(this.fullscreenView?document.body:this.container).offsetWidth*this.magnifier,s=no(i,n);this.showLoadingSpinner(),this.createGlass(),Fo(s,l=>{this.hideLoadingSpinner(),this.magnified=!0,No(e,this.innerBox,this.offset,l,this.glass,this.magnifier)},l=>{this.hideLoadingSpinner(),this.removeGlass(),this.emit("onError",{error:{message:l.message,url:l.url},errorCount:1,totalImages:1,errors:[{message:l.message,url:l.url}]})})}openFullscreenModal(e){e.stopPropagation(),window.document.body.style.overflow="hidden";const i=yo(this.container);new _e(i,this.viewerConfig,!0),this.emit("onFullscreenOpen"),this.announce("Opened fullscreen mode. Press Escape to exit.")}closeFullscreenModal(e){e.stopPropagation(),document.body.removeChild(this.container.parentNode),window.document.body.style.overflow="visible",this.emit("onFullscreenClose"),this.announce("Exited fullscreen mode")}play(){if(this.isClicked)return;this.hide360ViewCircleIcon(),this.emit("onAutoplayStart");const e=this.speed*36/(this.amountX+this.amountY),i={left:this.moveLeft.bind(this),right:this.moveRight.bind(this),top:this.moveTop.bind(this),bottom:this.moveBottom.bind(this)};this.loopTimeoutId=window.setInterval(()=>{if(this.playOnce&&$o({autoplayBehavior:this.autoplayBehavior,activeImageX:this.activeImageX,activeImageY:this.activeImageY,amountX:this.amountX,amountY:this.amountY,autoplayReverse:this.autoplayReverse})){this.stopAutoplay();return}zo({autoplayBehavior:this.autoplayBehavior,activeImageX:this.activeImageX,activeImageY:this.activeImageY,amountX:this.amountX,amountY:this.amountY,autoplayReverse:this.autoplayReverse,spinDirection:this.spinDirection})&&(this.spinDirection=Uo(this.spinDirection));const s=this.spinDirection==="y";_o({autoplayBehavior:this.autoplayBehavior,spinY:s,reversed:this.autoplayReverse,loopTriggers:i})},e)}stopAutoplay(){if(this.showAllIcons(),this.autoplay=!1,window.clearTimeout(this.loopTimeoutId),this.loopTimeoutId=null,this.emit("onAutoplayStop"),this.hints!==!1&&!this.hintsOverlay&&!this.hintsHidden){const e=this.hints===!0?Lt(this.viewerConfig,this.touchDevice):this.hints;e&&e.length>0&&(this.hintsOverlay=Ot(this.innerBox,e),At(this.hintsOverlay))}}destroy(){this.stopAutoplay(),this.inertiaAnimationId&&(cancelAnimationFrame(this.inertiaAnimationId),this.inertiaAnimationId=null),this.removeEvents(),this.canvasWorker&&(this.canvasWorker.terminate(),this.canvasWorker=null),this.hotspotsInstance&&this.hotspotsInstance.destroy(),this.hintsOverlay&&this.hintsOverlay.parentNode&&(this.hintsOverlay.parentNode.removeChild(this.hintsOverlay),this.hintsOverlay=null),this.hotspotTimeline&&this.hotspotTimeline.parentNode&&(this.hotspotTimeline.parentNode.removeChild(this.hotspotTimeline),this.hotspotTimeline=null,this.hotspotTimelineIndicator=null),this.container&&(this.container.classList.remove("ci360-theme-dark"),this.container.innerHTML="")}addInitialIcon(){this.initialIcon||this.hide360Logo||(this.initialIcon=ho(this.logoSrc),this.innerBox.appendChild(this.initialIcon))}showInitialIcon(){!this.initialIcon||this.hasInteracted||(this.initialIcon.style.opacity=1)}hideInitialIcon(){this.initialIcon&&(this.initialIcon.style.opacity=0)}createGlass(){this.hideAllIcons(),this.glass=document.createElement("div"),this.innerBox.appendChild(this.glass),this.innerBox.style.cursor="default"}removeGlass(){this.showAllIcons(),this.innerBox.removeChild(this.glass),this.glass=null,this.magnified=!1}addMagnifierIcon(){this.magnifier&&(this.magnifierIcon=vo(),this.magnifierIcon.onclick=this.magnify.bind(this),this.iconsContainer.appendChild(this.magnifierIcon))}showMagnifierIcon(){this.magnifierIcon&&(this.magnifierIcon.style.visibility="visible",this.magnifierIcon.style.opacity=1)}hideMagnifierIcon(){this.magnifierIcon&&(this.magnifierIcon.style.visibility="hidden",this.magnifierIcon.style.opacity=0)}addFullscreenIcon(){this.fullscreen&&(this.fullscreenIcon=fo(),this.fullscreenIcon.onclick=this.openFullscreenModal.bind(this),this.iconsContainer.appendChild(this.fullscreenIcon))}addCloseFullscreenIcon(){this.fullscreenCloseIcon=po(),this.fullscreenCloseIcon.onclick=this.closeFullscreenModal.bind(this),this.iconsContainer.appendChild(this.fullscreenCloseIcon)}showFullscreenIcon(){this.fullscreenIcon&&(this.fullscreenIcon.style.opacity=1)}hideFullscreenIcon(){this.fullscreenIcon&&(this.fullscreenIcon.style.opacity=0)}add360ViewCircleIcon(){this.view360CircleIcon||(this.view360CircleIcon=lo(this.bottomCircleOffset),this.innerBox.appendChild(this.view360CircleIcon))}show360ViewCircleIcon(){this.view360CircleIcon&&(this.view360CircleIcon.style.opacity=1)}hide360ViewCircleIcon(){this.view360CircleIcon&&(this.view360CircleIcon.style.opacity=0)}addLoadingSpinner(){this.loadingSpinner=bo(),this.innerBox.appendChild(this.loadingSpinner)}showLoadingSpinner(){this.loadingSpinner&&(this.hideAllIcons(),this.loadingSpinner.style.opacity=1)}createTransitionOverlay(){this.transitionOverlay=wo(),this.innerBox.appendChild(this.transitionOverlay)}showTransitionOverlay(){this.transitionOverlay&&(this.hideAllIcons(),this.transitionOverlay.style.opacity=1)}hideTransitionOverlay(){this.transitionOverlay&&(this.transitionOverlay.style.opacity=0)}hideLoadingSpinner(){this.loadingSpinner&&(this.loadingSpinner.style.opacity=0)}hideHints(){!this.hintsOverlay||this.hintsHidden||(this.hintsHidden=!0,ko(this.hintsOverlay))}addHotspotTimeline(){if(!this.hotspots||this.hotspotTimeline)return;const e=Ro(this.container,this.amountX,this.hotspots);if(!e)return;this.hotspotTimeline=e.element,this.hotspotTimelineIndicator=e.indicator,this.hotspotTimeline.querySelectorAll(".cloudimage-360-hotspot-timeline-dot").forEach(o=>{o.addEventListener("click",n=>{n.stopPropagation();const s=parseInt(o.getAttribute("data-frame"),10),r=o.getAttribute("data-hotspot-id");isNaN(s)||this.animateToFrame(s,r)})}),this.updateHotspotTimelinePosition()}showHotspotTimeline(){Yo(this.hotspotTimeline)}hideHotspotTimeline(){Po(this.hotspotTimeline)}updateHotspotTimelinePosition(){Xo(this.hotspotTimelineIndicator,this.activeImageX,this.amountX)}animateToFrame(e,i){if(this.isAnimatingToFrame||e===this.activeImageX){e===this.activeImageX&&i&&this.hotspotsInstance&&this.hotspotTimelineOnClick&&this.hotspotsInstance.showHotspotById(i);return}this.isAnimatingToFrame=!0,this.hasInteracted=!0,(this.autoplay||this.loopTimeoutId)&&(this.stopAutoplay(),this.autoplay=!1),this.inertiaAnimationId&&(cancelAnimationFrame(this.inertiaAnimationId),this.inertiaAnimationId=null);const o=this.activeImageX,n=(e-o+this.amountX)%this.amountX,s=(o-e+this.amountX)%this.amountX,r=n<=s,a=r?n:s;if(a===0){this.isAnimatingToFrame=!1;return}const l=30;let c=a;const h=()=>{if(c<=0){this.isAnimatingToFrame=!1,i&&this.hotspotsInstance&&this.hotspotTimelineOnClick&&setTimeout(()=>{this.hotspotsInstance.showHotspotById(i)},50);return}r?this.moveRight():this.moveLeft(),c--,c>0?setTimeout(h,l):(this.isAnimatingToFrame=!1,i&&this.hotspotsInstance&&this.hotspotTimelineOnClick&&setTimeout(()=>{this.hotspotsInstance.showHotspotById(i)},50))};h()}remove360ViewCircleIcon(){this.view360CircleIcon&&(this.innerBox.removeChild(this.view360CircleIcon),this.view360CircleIcon=null)}addAllIcons(){this.removeLoader(),this.innerBox.style.cursor="grab",this.pointerZoom&&(this.createTransitionOverlay(),this.addLoadingSpinner()),!this.fullscreenView&&!this.touchDevice&&this.addMagnifierIcon(),this.fullscreenView||this.addFullscreenIcon(),this.initialIconShown&&this.addInitialIcon(),this.bottomCircle&&this.add360ViewCircleIcon()}showAllIcons(){this.showInitialIcon(),this.show360ViewCircleIcon(),this.showMagnifierIcon(),this.showFullscreenIcon(),this.showHotspotTimeline()}hideAllIcons(){this.hideInitialIcon(),this.hide360ViewCircleIcon(),this.hideMagnifierIcon(),this.hideFullscreenIcon(),this.hideHotspotTimeline()}removeLoader(){this.loader&&(this.innerBox.removeChild(this.loader),this.loader=null)}attachEvents(e,i,o){e&&this.addMouseEvents(),i&&this.addTouchEvents(),o&&this.addKeyboardEvents(),this.addEscKeyHandler()}removeEvents(){this.removeMouseEvents(),this.removeTouchEvents(),this.removeKeyboardEvents(),this.removeEscKeyHandler()}addMouseEvents(){this.boundMouseClick=this.mouseClick.bind(this),this.boundMouseDown=this.mouseDown.bind(this),this.boundMouseMove=wt(this.mouseMove.bind(this),xt),this.boundMouseUp=this.mouseUp.bind(this),this.boundMouseLeave=this.mouseLeave.bind(this),this.innerBox.addEventListener("click",this.boundMouseClick),this.innerBox.addEventListener("mousedown",this.boundMouseDown),this.innerBox.addEventListener("mouseleave",this.boundMouseLeave),document.addEventListener("mousemove",this.boundMouseMove),document.addEventListener("mouseup",this.boundMouseUp)}addTouchEvents(){this.boundTouchOutside=this.touchOutside.bind(this),this.boundTouchStart=this.touchStart.bind(this),this.boundTouchEnd=this.touchEnd.bind(this),this.boundTouchMove=wt(this.touchMove.bind(this),xt),document.addEventListener("touchstart",this.boundTouchOutside),this.container.addEventListener("touchstart",this.boundTouchStart),this.container.addEventListener("touchend",this.boundTouchEnd),this.container.addEventListener("touchmove",this.boundTouchMove)}addKeyboardEvents(){this.boundKeyDown=this.keyDown.bind(this),this.boundKeyUp=this.keyUp.bind(this),document.addEventListener("keydown",this.boundKeyDown),document.addEventListener("keyup",this.boundKeyUp)}addEscKeyHandler(){this.boundEscHandler=e=>{e.keyCode===27&&(this.fullscreenView?this.closeFullscreenModal(e):this.isZoomed?this.removeZoom():this.glass&&this.removeGlass())},document.addEventListener("keydown",this.boundEscHandler)}removeEscKeyHandler(){document.removeEventListener("keydown",this.boundEscHandler)}removeMouseEvents(){this.innerBox.removeEventListener("click",this.boundMouseClick),this.innerBox.removeEventListener("mousedown",this.boundMouseDown),this.innerBox.removeEventListener("mouseleave",this.boundMouseLeave),document.removeEventListener("mousemove",this.boundMouseMove),document.removeEventListener("mouseup",this.boundMouseUp)}removeTouchEvents(){document.removeEventListener("touchstart",this.boundTouchOutside),this.container.removeEventListener("touchstart",this.boundTouchStart),this.container.removeEventListener("touchend",this.boundTouchEnd),this.container.removeEventListener("touchmove",this.boundTouchMove)}removeKeyboardEvents(){document.removeEventListener("keydown",this.boundKeyDown),document.removeEventListener("keyup",this.boundKeyUp)}createContainers(e){this.iconsContainer=kt(this.innerBox),this.canvas=uo(this.innerBox,e),this.loader=go(this.innerBox),this.ariaLiveRegion=Io(this.innerBox);const i=this.canvas.transferControlToOffscreen();this.canvasWorker.postMessage({action:"initCanvas",offscreen:i,devicePixelRatio:this.devicePixelRatio},[i]),this.fullscreenView&&this.addCloseFullscreenIcon(),it(this.innerBox,".cloudimage-360-placeholder")}update(e){this.isReady&&(this.stopAutoplay(),it(this.innerBox,".cloudimage-360-icons-container"),this.init(this.container,e,!0),this.iconsContainer=kt(this.innerBox),this.onAllImagesLoaded())}init(e,i,o){const n=i?Qi(i):qi(e),{folder:s,apiVersion:r,filenameX:a,filenameY:l,imageListX:c,imageListY:h,indexZeroBase:p,amountX:f,amountY:u,draggable:x=!0,swipeable:g=!0,keys:v,keysReverse:m,bottomCircleOffset:b,autoplay:I,autoplayBehavior:w,playOnce:C,speed:y,autoplayReverse:E,fullscreen:k,magnifier:S,ciToken:O,ciFilters:A,ciTransformation:H,lazyload:T,dragSpeed:U,stopAtEdges:K,pointerZoom:X,imageInfo:V="black",initialIconShown:ce,bottomCircle:q,hotspots:he,dragReverse:be,hide360Logo:oe,logoSrc:de,inertia:te,pinchZoom:_,hints:ne,theme:se,hotspotTimelineOnClick:J=!0,aspectRatio:ue,onReady:Ge,onLoad:we,onSpin:Ue,onAutoplayStart:Me,onAutoplayStop:Ke,onFullscreenOpen:qe,onFullscreenClose:De,onZoomIn:Be,onZoomOut:Je,onDragStart:Qe,onDragEnd:Q,onError:pe}=n,xe={ciToken:O,ciFilters:A,ciTransformation:H},fe=ot(c,[]),ae=ot(h,[]);if(this.viewerConfig=n,this.amountX=fe.length||f,this.amountY=ae.length||u,this.allowSpinX=!!this.amountX,this.allowSpinY=!!this.amountY,this.activeImageX=E?this.amountX-1:0,this.activeImageY=E?this.amountY-1:0,this.bottomCircleOffset=b,this.autoplay=I,this.autoplayBehavior=w,this.playOnce=C,this.speed=y,this.autoplayReverse=E,this.fullscreen=k,this.magnifier=S>1?Math.min(S,Ui):0,this.dragSpeed=Math.max(U,Gi),this.stopAtEdges=K,this.ciParams=xe,this.apiVersion=r,this.pointerZoom=X>1?Math.min(X,Et):null,this.keysReverse=m,this.info=V,this.keys=v,this.innerBox=this.innerBox??mo(this.container),ue&&(this.container.style.aspectRatio=ue),this.initialIconShown=ce,this.bottomCircle=q,this.spinDirection=Go(this.autoplayBehavior,this.allowSpinX,this.allowSpinY),this.dragReverse=be,this.hotspots=he,this.hide360Logo=oe,this.logoSrc=de,this.inertia=te,this.pinchZoom=_,this.hints=ne,this.hotspotTimelineOnClick=J,se==="dark"?this.container.classList.add("ci360-theme-dark"):se==="light"&&this.container.classList.remove("ci360-theme-dark"),this.onReady=Ge,this.onLoad=we,this.onSpin=Ue,this.onAutoplayStart=Me,this.onAutoplayStop=Ke,this.onFullscreenOpen=qe,this.onFullscreenClose=De,this.onZoomIn=Be,this.onZoomOut=Je,this.onDragStart=Qe,this.onDragEnd=Q,this.onError=pe,this.srcXConfig={folder:s,filename:a,imageList:fe,container:e,innerBox:this.innerBox,apiVersion:r,ciParams:xe,lazyload:T,amount:this.amountX,indexZeroBase:p,autoplayReverse:E,orientation:P.X},this.srcYConfig={...this.srcXConfig,filename:l,imageList:ae,orientation:P.Y,amount:this.amountY},o&&this.removeEvents(),this.attachEvents(x,g,v),o)return;const Ie=(this.fullscreenView?document.body:this.container).offsetWidth,Ce=this.allowSpinX&&!fe.length?Le(this.srcXConfig,Ie):null,Ee=this.allowSpinY&&!ae.length?Le(this.srcYConfig,Ie):null,Se=yi=>{St({cdnPathX:Ce,cdnPathY:Ee,configX:this.srcXConfig,configY:this.srcYConfig,onImageLoad:(ke,bi,wi)=>this.onImageLoad(ke,bi,wi),onFirstImageLoad:ke=>this.onFirstImageLoaded(yi,ke),onAllImagesLoad:this.onAllImagesLoaded.bind(this),onError:ke=>this.emit("onError",ke)})};this.allowSpinX?Rt(Ce,this.srcXConfig,Se):this.allowSpinY&&Rt(Ee,this.srcYConfig,Se)}}class ui{constructor(){this.views=new Map,this.initAll=this.initAll.bind(this),this.getViews=this.getViews.bind(this)}generateId(){return`ci360-${Math.random().toString(36).slice(2,11)}`}init(e,i,o){if(!e)return;const n=e.id||this.generateId();e.id||(e.id=n);const s=new _e(e,i,o);return this.views.set(n,s),s}initAll(e="cloudimage-360"){[...document.querySelectorAll(`.${e}`)].filter(Boolean).forEach(o=>{const n=o.id||this.generateId();o.id||(o.id=n);const s=new _e(o);this.views.set(n,s)})}destroy(e){const i=this.getViewById(e);i&&(i.destroy(),this.views.delete(e))}destroyAll(){this.views.forEach(e=>{e.destroy()}),this.views.clear()}getViewById(e){return this.views.get(e)}getViews(){return Array.from(this.views.values())}updateView(e,i){const o=this.getViewById(e);if(!o)return null;const n={...o.viewerConfig,...i};o.destroy();const s=document.getElementById(e);return this.init(s,n)}}window.CI360=ui;const bs=[{id:"hotspot-1",label:"Specifications",orientation:"x",containerSize:[1170,663],positions:{0:{x:527,y:319},1:{x:527,y:319},2:{x:527,y:null},3:{x:498,y:null},4:{x:470,y:null},5:{x:441,y:null},73:{x:555,y:null},72:{x:586,y:null},71:{x:614,y:null},70:{x:641,y:null},69:{x:668,y:null},68:{x:692,y:null},67:{x:715,y:null},66:{x:736,y:null},65:{x:756,y:null},64:{x:773,y:null},63:{x:787,y:null}},content:`
      <div class="hotspot-modal hotspot-modal--link">
        <a href="https://scaleflex.com" target="_blank" class="hotspot-link">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
            <polyline points="15 3 21 3 21 9"/>
            <line x1="10" y1="14" x2="21" y2="3"/>
          </svg>
          <span>View Full Specifications</span>
          <svg class="hotspot-link__arrow" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
        </a>
      </div>
    `},{id:"hotspot-2",label:"All-Terrain Wheels",orientation:"x",containerSize:[1220,680],positions:{73:{x:355,y:474},74:{x:355,y:null},72:{x:341,y:479},71:{x:336,y:null},70:{x:332,y:null},69:{x:327,y:null},68:{x:326,y:null},67:{x:327,y:null},66:{x:331,y:null},65:{x:334,y:null},64:{x:336,y:null},63:{x:347,y:474}},content:`
      <div class="hotspot-modal hotspot-modal--info">
        <div class="hotspot-info__badge">Premium</div>
        <h3 class="hotspot-info__title">All-Terrain Wheels</h3>
        <p class="hotspot-info__description">
          18-inch alloy wheels with reinforced sidewalls, designed for both on-road comfort and off-road durability.
        </p>
        <div class="hotspot-info__specs">
          <div class="hotspot-info__spec">
            <span class="hotspot-info__spec-label">Size</span>
            <span class="hotspot-info__spec-value">18"</span>
          </div>
          <div class="hotspot-info__spec">
            <span class="hotspot-info__spec-label">Type</span>
            <span class="hotspot-info__spec-value">Alloy</span>
          </div>
        </div>
      </div>
    `},{id:"hotspot-3",label:"Roof Rack",orientation:"x",containerSize:[1220,680],positions:{11:{x:683,y:151},12:{x:683,y:null},13:{x:683,y:null},14:{x:683,y:null},15:{x:683,y:null},16:{x:683,y:null},17:{x:681,y:152},18:{x:677,y:156},19:{x:671,y:159},20:{x:665,y:163},21:{x:656,y:168},22:{x:650,y:171},23:{x:643,y:176},24:{x:635,y:178},25:{x:628,y:181},26:{x:621,y:null},27:{x:610,y:null},28:{x:598,y:null},29:{x:588,y:null},30:{x:578,y:null},31:{x:570,y:176},32:{x:560,y:173}},content:`
      <div class="hotspot-modal hotspot-modal--gallery">
        <div class="hotspot-gallery__images">
          <img src="https://scaleflex.cloudimg.io/v7/demo/suv-orange-car-360/orange-11.jpg?w=80&h=60&func=cover" alt="Roof rack angle 1" />
          <img src="https://scaleflex.cloudimg.io/v7/demo/suv-orange-car-360/orange-20.jpg?w=80&h=60&func=cover" alt="Roof rack angle 2" />
          <img src="https://scaleflex.cloudimg.io/v7/demo/suv-orange-car-360/orange-30.jpg?w=80&h=60&func=cover" alt="Roof rack angle 3" />
        </div>
        <div class="hotspot-gallery__content">
          <h3 class="hotspot-gallery__title">Adventure Roof Rack</h3>
          <p class="hotspot-gallery__description">
            Heavy-duty roof rack system with 150kg capacity. Perfect for camping gear, kayaks, or extra luggage.
          </p>
          <div class="hotspot-gallery__actions">
            <a href="https://scaleflex.com" target="_blank" class="hotspot-btn hotspot-btn--primary">
              Configure
            </a>
            <button class="hotspot-btn hotspot-btn--secondary">
              Add to Cart
            </button>
          </div>
        </div>
      </div>
    `},{id:"hotspot-4",label:"LED Headlights",orientation:"x",containerSize:[1220,680],positions:{6:{x:607,y:246},7:{x:619,y:null},8:{x:630,y:null},9:{x:637,y:null},10:{x:642,y:null}},content:`
      <div class="hotspot-modal hotspot-modal--info">
        <h3 class="hotspot-info__title">LED Headlights</h3>
        <p class="hotspot-info__description">
          Adaptive LED headlights with automatic high beam and cornering light technology for superior night visibility.
        </p>
        <div class="hotspot-info__specs">
          <div class="hotspot-info__spec">
            <span class="hotspot-info__spec-label">Type</span>
            <span class="hotspot-info__spec-value">LED</span>
          </div>
          <div class="hotspot-info__spec">
            <span class="hotspot-info__spec-label">Lumens</span>
            <span class="hotspot-info__spec-value">3000</span>
          </div>
        </div>
      </div>
    `}],ws={folder:"https://scaleflex.cloudimg.io/v7/demo/360-nike/",filenameX:"nike-{index}.jpg",filenameY:"nike-y-{index}.jpg",amountX:"35",amountY:"36",autoplayBehavior:"spin-xy"},xs={folder:"https://scaleflex.cloudimg.io/v7/demo/earbuds/",filenameX:"{index}.jpg",amountX:"233",amountY:void 0,filenameY:void 0},zt={folder:{label:"data-folder",value:"https://scaleflex.cloudimg.io/v7/demo/earbuds/",isRequired:!0,isUrl:!0},filenameX:{label:"data-filename-x",value:"{index}.jpg"},filenameY:{label:"data-filename-y"},amountY:{label:"data-amount-y",isRequired:!1},amountX:{label:"data-amount-x",value:233,isRequired:!0},speed:{label:"data-speed",value:100,isRequired:!1},dragSpeed:{label:"data-drag-speed",value:120,isRequired:!1},autoplay:{label:"data-autoplay",isRequired:!1},pointerZoom:{label:"data-pointer-zoom",value:1.5,isRequired:!1},autoplayBehavior:{label:"data-autoplay-behavior",value:"spin-xy",isRequired:!1},magnifier:{label:"data-magnifier",value:1.5,isRequired:!1},autoplayReverse:{label:"data-autoplay-reverse",isRequired:!1},playOnce:{label:"data-play-once",isRequired:!1},keys:{label:"data-keys",isRequired:!1},keysReverse:{label:"data-keys-reverse",isRequired:!1},draggable:{label:"data-draggable",isRequired:!1},swipeable:{label:"data-swipeable",isRequired:!1},fullscreen:{label:"data-fullscreen",isRequired:!1},dragReverse:{label:"data-drag-reverse",isRequired:!1},stopAtEdges:{label:"data-stop-at-edges",isRequired:!1},bottomCircle:{label:"data-bottom-circle",isRequired:!1},inertia:{label:"data-inertia",isRequired:!1},hints:{label:"data-hints",isRequired:!1},theme:{label:"data-theme",isRequired:!1}},Gt={NAME:"#7B9200",URL:"#2D88CB"},Is=["folder","class"],Cs=document.getElementById("spin-directions"),Ut=document.getElementById("copy-text"),Kt=document.getElementById("code-block"),qt=document.getElementById("code-wrapper"),at=document.getElementById("pointer-zoom-selector"),Es=document.querySelector(".code-section .copy-button"),Ss=document.querySelector(".output-code"),ks=document.getElementById("pointer-checkbox"),Os=document.querySelectorAll(".plugin-option"),rt=document.getElementById("x-images-selector"),Ls=document.getElementById("images-y"),As=document.getElementById("spin-speed"),Ts=document.getElementById("drag-speed"),pi=document.getElementById("custom-styling-checkbox"),Rs=document.getElementById("custom-styling-wrapper"),fi=document.getElementById("custom-styling-textarea"),Xs=document.getElementById("theme-selector"),mi=document.querySelectorAll(".hint-option"),Ys=document.getElementById("folder-path-option"),vt=document.getElementById("folder-path"),Re=document.getElementById("filename-pattern"),$e=document.getElementById("custom-images-input"),lt=document.getElementById("nike-x-images"),R=new ui;function Ps(t){const e=t.target.value,i=e==="Y",o=e==="custom";if(Ys.style.display=o?"block":"none",Re.disabled=!o,rt.style.display=!i&&!o?"block":"none",lt.style.display=i?"block":"none",$e.style.display=o?"block":"none",Ls.style.display=i?"block":"none",o){const n=vt.value||"",s=Re.value||"{index}.jpg",r=parseInt($e.value,10)||36;if(n){const a=R.updateView("demo-generator",{folder:n,filenameX:s,amountX:r,amountY:0,filenameY:null});Z(a.viewerConfig)}}else{const n=i?ws:xs,s=R.updateView("demo-generator",n);i?lt.value=35:rt.value=233,Re.value="{index}.jpg",Z(s.viewerConfig)}}function Hs(t){const e=t.target.value,i=Re.value||"{index}.jpg",o=parseInt($e.value,10)||36;if(e){const n=R.updateView("demo-generator",{folder:e,filenameX:i,amountX:o});Z(n.viewerConfig)}}function Ms(t){const e=t.target.value;if(vt.value&&e){const o=R.updateView("demo-generator",{filenameX:e});Z(o.viewerConfig)}}function Ds(t){const e=parseInt(t.target.value,10);if(e>0){const i=R.updateView("demo-generator",{amountX:e});Z(i.viewerConfig)}}function Bs(t){const{value:e}=t.target,i=R.updateView("demo-generator",{dragSpeed:parseInt(e,10)});Z(i.viewerConfig)}function Zs(t){const{value:e}=t.target,i=R.updateView("demo-generator",{speed:parseInt(e,10)});Z(i.viewerConfig)}function Vs(){navigator.clipboard.writeText(Ss.innerText),Ut.innerHTML="Copied",setTimeout(()=>{Ut.innerHTML="Copy"},500)}function vi(t){const{value:e}=t.target,i=R.updateView("demo-generator",{amountX:parseInt(e,10)});Z(i.viewerConfig)}function Fs(t){const e=t.target.checked,i=parseFloat(at.value,10),o=R.updateView("demo-generator",{pointerZoom:e?i:!1});at.disabled=!e,Z(o.viewerConfig)}function Ws(t){const{value:e}=t.target,i=R.updateView("demo-generator",{pointerZoom:parseFloat(e,10)});Z(i.viewerConfig)}function Ns(t){const e=t.target.checked,i=t.target.getAttribute("data-plugin-property"),o=t.target.getAttribute("data-plugin-value");let n=e;o&&(n=e?JSON.parse(o):void 0);const s=R.updateView("demo-generator",{[i]:n});Z(s.viewerConfig)}function Z(t){Kt.innerText="",Object.keys(t).filter(o=>zt[o]&&!!t[o]).forEach(o=>{const{label:n}=zt[o],s=document.createElement("div"),r=document.createElement("span"),a=document.createElement("span");r.innerText=n,r.style.color=Gt.NAME,Is.includes(o)&&(a.style.color=Gt.URL),s.appendChild(r),a.innerText=`"${t[o]}"`,s.innerHTML+="=",s.appendChild(a),Kt.appendChild(s),qt.scrollTop=qt.scrollHeight})}Ts.addEventListener("change",Bs);As.addEventListener("change",Zs);ks.addEventListener("change",Fs);rt.addEventListener("change",vi);at.addEventListener("change",Ws);Cs.addEventListener("change",Ps);Es.addEventListener("click",Vs);vt.addEventListener("change",Hs);Re.addEventListener("change",Ms);$e.addEventListener("change",Ds);lt.addEventListener("change",vi);Os.forEach(t=>{t.addEventListener("change",Ns)});const js=document.getElementById("gurkha-suv"),_s={folder:"https://scaleflex.cloudimg.io/v7/demo/suv-orange-car-360/",filenameX:"orange-{index}.jpg",amountX:73,lazyload:!0,speed:120,pointerZoom:2,responsive:"scaleflex",autoplay:!0,fullscreen:!0,magnifier:3,playOnce:!0,bottomCircle:!1,hotspots:bs,inertia:!0,hints:["drag","click"]};R.init(js,_s);const $s=document.getElementById("demo-generator"),zs={folder:"https://scaleflex.cloudimg.io/v7/demo/earbuds/",filenameX:"{index}.jpg",amountX:233,autoplay:!0,speed:100,pointerZoom:1.5,dragSpeed:100,bottomCircle:!1,fullscreen:!0,keys:!0,responsive:"scaleflex",lazyload:!0,hints:["drag","click"],onReady:t=>{console.log("onReady:",t.viewerId)},onLoad:t=>{console.log("onLoad:",`${t.imagesX} images loaded`)},onSpin:t=>{console.log("onSpin:",`Frame ${t.activeImageX+1}/${t.amountX}`,t.direction)},onAutoplayStart:t=>{console.log("onAutoplayStart:",t.viewerId)},onAutoplayStop:t=>{console.log("onAutoplayStop:",t.viewerId)},onFullscreenOpen:t=>{console.log("onFullscreenOpen:",t.viewerId)},onFullscreenClose:t=>{console.log("onFullscreenClose:",t.viewerId)},onZoomIn:t=>{console.log("onZoomIn:",`zoom level ${t.zoomLevel}`)},onZoomOut:t=>{console.log("onZoomOut:",t.viewerId)},onDragStart:t=>{console.log("onDragStart:",t.viewerId)},onDragEnd:t=>{console.log("onDragEnd:",t.viewerId)}};R.init($s,zs);const Gs=R.getViewById("demo-generator");Z(Gs.viewerConfig);let $=null,Jt=null;function Us(t){const e=t.target.checked;Rs.style.display=e?"block":"none",e?gi():$&&($.remove(),$=null)}function Ks(t,e){const i=o=>o.replace(/\/\*[\s\S]*?\*\//g,"").trim();return t.replace(/(\/\*[\s\S]*?\*\/\s*)?([^\{\}]+)\{/g,(o,n,s)=>{const r=n||"",a=s.split(",").map(l=>{const c=i(l);return c?c.startsWith(`#${e}`)?c:c===".cloudimage-360"?`#${e}`:`#${e} ${c}`:""}).filter(Boolean).join(", ");return`${r}${a} {`})}function gi(){const t=fi.value.trim();if($&&($.remove(),$=null),!t)return;const e=Ks(t,"demo-generator");$=document.createElement("style"),$.id="demo-generator-custom-styles",$.textContent=e,document.head.appendChild($)}function qs(){pi.checked&&(clearTimeout(Jt),Jt=setTimeout(gi,150))}pi.addEventListener("change",Us);fi.addEventListener("input",qs);function Js(t){const{value:e}=t.target,i=R.updateView("demo-generator",{theme:e});Z(i.viewerConfig)}Xs.addEventListener("change",Js);function Qs(){const t=[];return mi.forEach(e=>{e.checked&&t.push(e.getAttribute("data-hint"))}),t.length>0?t:!1}function ea(){const t=Qs(),e=R.updateView("demo-generator",{hints:t});Z(e.viewerConfig)}mi.forEach(t=>{t.addEventListener("change",ea)});R.initAll();
